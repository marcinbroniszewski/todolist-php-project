"use strict";var monthYearDate=document.querySelector(".month-year"),numericDays=document.querySelector(".numeric-days"),prevMonthBtn=document.querySelector(".prev-month-btn"),nextMonthBtn=document.querySelector(".next-month-btn"),fullDate=new Date,currentDay=fullDate.getDate(),month=fullDate.getMonth(),year=fullDate.getFullYear(),setMonthYearDate=function(t,e){monthYearDate.innerHTML="".concat(["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"][t]," ").concat(e)},createCalendar=function(t,e){for(var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,o=(setMonthYearDate(e,t),new Date(t,e,1).getDay()),c=(0===o&&(o=7),new Date(t,e+1,0).getDate()),s=new Date(t,e,0).getDate(),l="<tr>",d=0,i=s-o+2;i<=s;i++)7===d&&(l+="</tr><tr>",d=0),l+='<td class="prev-month-day date">'.concat(i,"</td>"),d++;for(var m=1;m<=c;m++)7===d&&(l+="</tr><tr>",d=0),l+=(m===a&&e===n&&t===r||m===a?'<td class="date active">':'<td class="date">').concat(m,"</td>"),d++;if(0!==d){for(var h=7-d,y=1;y<=h;y++)l+='<td class="next-month-day date">'.concat(y,"</td>"),d++;d=0}numericDays.innerHTML=l+="</tr></tbody></table>",document.querySelectorAll(".date").forEach(function(t){return t.addEventListener("click",selectDate)})},selectPrevMonth=function(){var t=JSON.parse(localStorage.getItem("storedDate"))||{year:year,month:month},e=JSON.parse(localStorage.getItem("selectedDate"));0===t.month?(t.month=11,t.year--):t.month--,localStorage.setItem("storedDate",JSON.stringify(t)),createCalendar(t.year,t.month),t.month===e.month&&setActiveDate(e.day)},selectNextMonth=function(){var t=JSON.parse(localStorage.getItem("storedDate"))||{year:year,month:month},e=JSON.parse(localStorage.getItem("selectedDate"));11===t.month?(t.month=0,t.year++):t.month++,localStorage.setItem("storedDate",JSON.stringify(t)),createCalendar(t.year,t.month),t.month===e.month&&setActiveDate(e.day)},setActiveDate=function(e){var t=document.querySelectorAll(".date"),t=Array.from(t).find(function(t){return t.textContent===e.toString()&&!t.classList.contains("prev-month-day")&&!t.classList.contains("next-month-day")});t&&t.classList.add("active")},selectDate=function(t){var e=Number(t.target.textContent),a=JSON.parse(localStorage.getItem("storedDate"))||{year:year,month:month},t=(t.target.classList.contains("next-month-day")&&11===a.month?(a.month=0,a.year++):t.target.classList.contains("next-month-day")?a.month++:t.target.classList.contains("prev-month-day")&&0===a.month?(a.month=11,a.year--):t.target.classList.contains("prev-month-day")&&a.month--,"".concat(a.year,"-").concat(a.month+1,"-").concat(e));sendDateData(t)},sendDateData=function(t){fetch("../app/includes/selected_date.inc.php",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:"date="+t}).then(function(t){return t.json()}).then(function(t){var t=t.split("-"),e=Number(t[0]),a=Number(t[1])-1,t=Number(t[2]);localStorage.setItem("selectedDate",JSON.stringify({year:e,month:a,day:t})),localStorage.setItem("storedDate",JSON.stringify({year:e,month:a}))}).then(function(){return location.reload()}).catch(function(t){console.error("Wystąpił błąd:",t)})},selectedDate=JSON.parse(localStorage.getItem("selectedDate")),storedDate=JSON.parse(localStorage.getItem("storedDate"));selectedDate&&storedDate?createCalendar(storedDate.year,storedDate.month,selectedDate.day,selectedDate.month,selectedDate.year):(localStorage.setItem("selectedDate",JSON.stringify({year:year,month:month,day:currentDay})),localStorage.setItem("storedDate",JSON.stringify({year:year,month:month})),createCalendar(year,month,currentDay)),prevMonthBtn.addEventListener("click",selectPrevMonth),nextMonthBtn.addEventListener("click",selectNextMonth);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbGVuZGFyLmpzIl0sIm5hbWVzIjpbIm1vbnRoWWVhckRhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJudW1lcmljRGF5cyIsIm5leHRNb250aEJ0biIsImN1cnJlbnREYXkiLCJmdWxsRGF0ZSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGhOYW1lcyIsImlubmVySFRNTCIsImNvbmNhdCIsInNldE1vbnRoWWVhckRhdGUiLCJmaXJzdERheSIsInRhYmxlSFRNTCIsInNlbGVjdGVkRGF5IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwic2VsZWN0ZWRNb250aCIsInNlbGVjdGVkWWVhciIsIkRhdGUiLCJnZXREYXkiLCJsYXN0RGF5IiwibGFzdERheU9mTGFzdE1vbnRoIiwiZGF5Q291bnRlciIsImkiLCJsZWZ0RGF5cyIsImZvckVhY2giLCJ0ZCIsInRkRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2VsZWN0ZWREYXRlIiwiSlNPTiIsImxvY2FsU3RvcmFnZSIsInN0b3JlZERhdGUiLCJjcmVhdGVDYWxlbmRhciIsInNlbGVjdE5leHRNb250aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZWxlY3REYXRlIiwic2VsZWN0UHJldk1vbnRoIiwicGFyc2UiLCJnZXRJdGVtIiwic2V0QWN0aXZlRGF0ZSIsImRheSIsInRkQXJyYXkiLCJmcm9tIiwidGV4dENvbnRlbnQiLCJ0b1N0cmluZyIsImNsYXNzTGlzdCIsInRkQWN0aXZlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsIk51bWJlciIsInRhcmdldCIsImRhdGUiLCJzZW5kRGF0ZURhdGEiLCJhZGQiLCJlIiwiYm9keSIsInRoZW4iLCJyZXNwb25zZSIsImNvbnRhaW5zIiwiZGF0ZUFycmF5IiwiY29uc29sZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkNvbnRlbnQtdHlwZSIsImpzb24iLCJkYXRhIiwic3Bs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RUFBQUYsTUFBQUEsQ0FBQSxDQUFBLENBQUEsQ0FuQnZELENBQUMsRUFtQitEdUQsS0FBRSxXQUFBLE9BQUFZLFNBQUFDLE9BQUEsQ0FBQSxDQUFBLEVBQUEsTUFDbkVyQyxTQUFBQSxHQUNENEIsUUFBQVUsTUFBQSxpQkFBQUEsQ0FBQSxDQWpCRSxDQUFDLENBbUJILEVBZk0xQyxhQUFlQyxLQUFLUSxNQUFNUCxhQUFhUSxRQUFRLGNBQWMsQ0FBQyxFQUU5RFAsV0FBYUYsS0FBS1EsTUFBTVAsYUFBYVEsUUFBUSxZQUFZLENBQUMsRUFLNURWLGNBQWdCRyxXQUNuQkMsZUFBZUQsV0FBVzVCLEtBQU00QixXQUFXOUIsTUFBTzJCLGFBQWFZLElBQUtaLGFBQWEzQixNQUFPMkIsYUFBYXpCLElBQUksR0FFekcyQixhQUFhaUIsUUFBUSxlQUFnQmxCLEtBQUttQixVQUFVLENBQUU3QyxLQUFBQSxLQUFNRixNQUFBQSxNQUFPdUMsSUFBSzFDLFVBQVcsQ0FBQyxDQUFDLEVBQ3JGZ0MsYUFBYWlCLFFBQVEsYUFBY2xCLEtBQUttQixVQUFVLENBQUU3QyxLQUFBQSxLQUFNRixNQUFBQSxLQUFNLENBQUMsQ0FBQyxFQUNsRStCLGVBQWU3QixLQUFNRixNQUFPSCxVQUFVLEdBSXZDeUUsYUFBYXJDLGlCQUFpQixRQUFTRSxlQUFlLEVBQ3REdkMsYUFBYXFDLGlCQUFpQixRQUFTRCxlQUFlIiwiZmlsZSI6ImNhbGVuZGFyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbnRoWWVhckRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9udGgteWVhcicpO1xyXG5jb25zdCBudW1lcmljRGF5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5udW1lcmljLWRheXMnKTtcclxuY29uc3QgcHJldk1vbnRoQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZXYtbW9udGgtYnRuJyk7XHJcbmNvbnN0IG5leHRNb250aEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXh0LW1vbnRoLWJ0bicpO1xyXG5cclxuY29uc3QgZnVsbERhdGUgPSBuZXcgRGF0ZSgpO1xyXG5cclxubGV0IGN1cnJlbnREYXkgPSBmdWxsRGF0ZS5nZXREYXRlKCk7XHJcbmxldCBtb250aCA9IGZ1bGxEYXRlLmdldE1vbnRoKCk7XHJcbmxldCB5ZWFyID0gZnVsbERhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbmNvbnN0IHNldE1vbnRoWWVhckRhdGUgPSAobW9udGgsIHllYXIpID0+IHtcclxuXHRjb25zdCBtb250aE5hbWVzID0gW1xyXG5cdFx0J1N0eWN6ZcWEJyxcclxuXHRcdCdMdXR5JyxcclxuXHRcdCdNYXJ6ZWMnLFxyXG5cdFx0J0t3aWVjaWXFhCcsXHJcblx0XHQnTWFqJyxcclxuXHRcdCdDemVyd2llYycsXHJcblx0XHQnTGlwaWVjJyxcclxuXHRcdCdTaWVycGllxYQnLFxyXG5cdFx0J1dyemVzaWXFhCcsXHJcblx0XHQnUGHFumR6aWVybmlrJyxcclxuXHRcdCdMaXN0b3BhZCcsXHJcblx0XHQnR3J1ZHppZcWEJyxcclxuXHRdO1xyXG5cdGNvbnN0IG1vbnRoTmFtZSA9IG1vbnRoTmFtZXNbbW9udGhdO1xyXG5cdG1vbnRoWWVhckRhdGUuaW5uZXJIVE1MID0gYCR7bW9udGhOYW1lfSAke3llYXJ9YDtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhbGVuZGFyID0gKHllYXIsIG1vbnRoLCBzZWxlY3RlZERheSA9IG51bGwsIHNlbGVjdGVkTW9udGggPSBudWxsLCBzZWxlY3RlZFllYXIgPSBudWxsKSA9PiB7XHJcblx0c2V0TW9udGhZZWFyRGF0ZShtb250aCwgeWVhcik7XHJcblxyXG5cdGxldCBmaXJzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKTtcclxuXHRmaXJzdERheSA9PT0gMCAmJiAoZmlyc3REYXkgPSA3KTtcclxuXHRjb25zdCBsYXN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGggKyAxLCAwKS5nZXREYXRlKCk7XHJcblx0Y29uc3QgbGFzdERheU9mTGFzdE1vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDApLmdldERhdGUoKTtcclxuXHJcblx0bGV0IHRhYmxlSFRNTCA9ICc8dHI+JztcclxuXHJcblx0Y29uc3Qgc3RhcnRQcmV2TW9udGhEYXkgPSBsYXN0RGF5T2ZMYXN0TW9udGggLSBmaXJzdERheSArIDI7XHJcblxyXG5cdGxldCBkYXlDb3VudGVyID0gMDtcclxuXHQvL0RvZGF3YW5pZSBkbmkgeiBwb3ByemVkbmllZ28gbWllc2nEhWNhXHJcblx0Zm9yIChsZXQgaSA9IHN0YXJ0UHJldk1vbnRoRGF5OyBpIDw9IGxhc3REYXlPZkxhc3RNb250aDsgaSsrKSB7XHJcblx0XHRpZiAoZGF5Q291bnRlciA9PT0gNykge1xyXG5cdFx0XHR0YWJsZUhUTUwgKz0gJzwvdHI+PHRyPic7XHJcblxyXG5cdFx0XHRkYXlDb3VudGVyID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHR0YWJsZUhUTUwgKz0gYDx0ZCBjbGFzcz1cInByZXYtbW9udGgtZGF5IGRhdGVcIj4ke2l9PC90ZD5gO1xyXG5cclxuXHRcdGRheUNvdW50ZXIrKztcclxuXHR9XHJcblx0Ly9Eb2Rhd2FuaWUgZG5pIHogYWt0dWFsbmVnbyBtaWVzacSFY2FcclxuXHRmb3IgKGxldCBpID0gMTsgaSA8PSBsYXN0RGF5OyBpKyspIHtcclxuXHRcdGlmIChkYXlDb3VudGVyID09PSA3KSB7XHJcblx0XHRcdHRhYmxlSFRNTCArPSAnPC90cj48dHI+JztcclxuXHJcblx0XHRcdGRheUNvdW50ZXIgPSAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChpID09PSBzZWxlY3RlZERheSAmJiBtb250aCA9PT0gc2VsZWN0ZWRNb250aCAmJiB5ZWFyID09PSBzZWxlY3RlZFllYXIpIHtcclxuXHRcdFx0dGFibGVIVE1MICs9IGA8dGQgY2xhc3M9XCJkYXRlIGFjdGl2ZVwiPiR7aX08L3RkPmA7XHJcblx0XHR9IGVsc2UgaWYgKGkgPT09IHNlbGVjdGVkRGF5KXtcclxuXHRcdFx0dGFibGVIVE1MICs9IGA8dGQgY2xhc3M9XCJkYXRlIGFjdGl2ZVwiPiR7aX08L3RkPmA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0YWJsZUhUTUwgKz0gYDx0ZCBjbGFzcz1cImRhdGVcIj4ke2l9PC90ZD5gO1xyXG5cdFx0fVxyXG5cdFx0ZGF5Q291bnRlcisrO1xyXG5cdH1cclxuXHQvL0RvZGF3YW5pZSBkbmkgeiBuYXN0ZXBuZWdvIG1pZXNpxIVjYVxyXG5cdGlmIChkYXlDb3VudGVyICE9PSAwKSB7XHJcblx0XHRjb25zdCBsZWZ0RGF5cyA9IDcgLSBkYXlDb3VudGVyO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IGxlZnREYXlzOyBpKyspIHtcclxuXHRcdFx0dGFibGVIVE1MICs9IGA8dGQgY2xhc3M9XCJuZXh0LW1vbnRoLWRheSBkYXRlXCI+JHtpfTwvdGQ+YDtcclxuXHJcblx0XHRcdGRheUNvdW50ZXIrKztcclxuXHRcdH1cclxuXHRcdGRheUNvdW50ZXIgPSAwO1xyXG5cdH1cclxuXHJcblx0dGFibGVIVE1MICs9ICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nO1xyXG5cdG51bWVyaWNEYXlzLmlubmVySFRNTCA9IHRhYmxlSFRNTDtcclxuXHJcblx0Ly9Vc3Rhd2lhbmllIGxpc3RlbmVyw7N3IG5hIGRhdHlcclxuXHRjb25zdCB0ZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUnKTtcclxuXHR0ZEVsZW1lbnRzLmZvckVhY2godGQgPT4gdGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY3REYXRlKSk7XHJcbn07XHJcblxyXG4vL1d5YmllcmFuaWUgaW5ueWNoIG1pZXNpxJljeVxyXG5jb25zdCBzZWxlY3RQcmV2TW9udGggPSAoKSA9PiB7XHJcblx0bGV0IHN0b3JlZERhdGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdG9yZWREYXRlJykpIHx8IHsgeWVhciwgbW9udGggfTtcclxuY29uc3Qgc2VsZWN0ZWREYXRlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0ZWREYXRlJykpXHJcblx0aWYgKHN0b3JlZERhdGUubW9udGggPT09IDApIHtcclxuXHRcdHN0b3JlZERhdGUubW9udGggPSAxMTtcclxuXHRcdHN0b3JlZERhdGUueWVhci0tO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzdG9yZWREYXRlLm1vbnRoLS07XHJcblx0fVxyXG5cclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc3RvcmVkRGF0ZScsIEpTT04uc3RyaW5naWZ5KHN0b3JlZERhdGUpKTtcclxuXHRjcmVhdGVDYWxlbmRhcihzdG9yZWREYXRlLnllYXIsIHN0b3JlZERhdGUubW9udGgpO1xyXG5cclxuXHRpZiAoc3RvcmVkRGF0ZS5tb250aCA9PT0gc2VsZWN0ZWREYXRlLm1vbnRoKSB7XHJcblx0XHRzZXRBY3RpdmVEYXRlKHNlbGVjdGVkRGF0ZS5kYXkpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHNlbGVjdE5leHRNb250aCA9ICgpID0+IHtcclxuXHRsZXQgc3RvcmVkRGF0ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0b3JlZERhdGUnKSkgfHwgeyB5ZWFyLCBtb250aCB9O1xyXG5jb25zdCBzZWxlY3RlZERhdGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxlY3RlZERhdGUnKSlcclxuXHRpZiAoc3RvcmVkRGF0ZS5tb250aCA9PT0gMTEpIHtcclxuXHRcdHN0b3JlZERhdGUubW9udGggPSAwO1xyXG5cdFx0c3RvcmVkRGF0ZS55ZWFyKys7XHJcblx0fSBlbHNlIHtcclxuXHRcdHN0b3JlZERhdGUubW9udGgrKztcclxuXHR9XHJcblxyXG5cdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdG9yZWREYXRlJywgSlNPTi5zdHJpbmdpZnkoc3RvcmVkRGF0ZSkpO1xyXG5cdGNyZWF0ZUNhbGVuZGFyKHN0b3JlZERhdGUueWVhciwgc3RvcmVkRGF0ZS5tb250aCk7XHJcblxyXG5cdGlmIChzdG9yZWREYXRlLm1vbnRoID09PSBzZWxlY3RlZERhdGUubW9udGgpIHtcclxuXHRcdHNldEFjdGl2ZURhdGUoc2VsZWN0ZWREYXRlLmRheSk7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gVXN0YXdpZW5pZSBha3R5d25laiBkYXR5IGplxZtsaSB3eWJyYW55IG1pZXNpxIVjIGplc3QgcsOzd255IGFrdHVhbG5lbXVcclxuY29uc3Qgc2V0QWN0aXZlRGF0ZSA9IChzZWxlY3RlZERheSkgPT4ge1xyXG5cclxuXHRjb25zdCB0ZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUnKTtcclxuXHRjb25zdCB0ZEFycmF5ID0gQXJyYXkuZnJvbSh0ZEVsZW1lbnRzKTtcclxuXHJcblx0Y29uc3QgdGRBY3RpdmUgPSB0ZEFycmF5LmZpbmQoXHJcblx0XHR0ZCA9PlxyXG5cdFx0XHR0ZC50ZXh0Q29udGVudCA9PT0gc2VsZWN0ZWREYXkudG9TdHJpbmcoKSAmJlxyXG5cdFx0XHQhdGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcmV2LW1vbnRoLWRheScpICYmXHJcblx0XHRcdCF0ZC5jbGFzc0xpc3QuY29udGFpbnMoJ25leHQtbW9udGgtZGF5JylcclxuXHQpO1xyXG5cclxuXHRpZiAodGRBY3RpdmUpIHtcclxuXHRcdHRkQWN0aXZlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cdH1cclxufTtcclxuXHJcbi8vV3liaWVyYW5pZSB6YWRhxYQgeiBpbm5laiBkYXR5XHJcbmNvbnN0IHNlbGVjdERhdGUgPSBlID0+IHtcclxuXHRsZXQgZGF5ID0gTnVtYmVyKGUudGFyZ2V0LnRleHRDb250ZW50KTtcclxuXHRsZXQgc3RvcmVkRGF0ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0b3JlZERhdGUnKSkgfHwgeyB5ZWFyLCBtb250aCB9O1xyXG5cclxuXHRpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCduZXh0LW1vbnRoLWRheScpICYmIHN0b3JlZERhdGUubW9udGggPT09IDExKSB7XHJcblx0XHRzdG9yZWREYXRlLm1vbnRoID0gMDtcclxuXHRcdHN0b3JlZERhdGUueWVhcisrO1xyXG5cdH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCduZXh0LW1vbnRoLWRheScpKSB7XHJcblx0XHRzdG9yZWREYXRlLm1vbnRoKys7XHJcblx0fSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3ByZXYtbW9udGgtZGF5JykgJiYgc3RvcmVkRGF0ZS5tb250aCA9PT0gMCkge1xyXG5cdFx0c3RvcmVkRGF0ZS5tb250aCA9IDExO1xyXG5cdFx0c3RvcmVkRGF0ZS55ZWFyLS07XHJcblx0fSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3ByZXYtbW9udGgtZGF5JykpIHtcclxuXHRcdHN0b3JlZERhdGUubW9udGgtLTtcclxuXHR9XHJcblxyXG5cdGNvbnN0IGRhdGUgPSBgJHtzdG9yZWREYXRlLnllYXJ9LSR7c3RvcmVkRGF0ZS5tb250aCArIDF9LSR7ZGF5fWA7XHJcblxyXG5cdHNlbmREYXRlRGF0YShkYXRlKTtcclxufTtcclxuXHJcbi8vV3lzecWCYW5pZSBkYW55Y2hcclxuY29uc3Qgc2VuZERhdGVEYXRhID0gZGF0ZSA9PiB7XHJcblx0ZmV0Y2goJy4uL2FwcC9pbmNsdWRlcy9zZWxlY3RlZF9kYXRlLmluYy5waHAnLCB7XHJcblx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0J0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxyXG5cdFx0fSxcclxuXHRcdGJvZHk6ICdkYXRlPScgKyBkYXRlLFxyXG5cdH0pXHJcblx0XHQudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcblx0XHQudGhlbihkYXRhID0+IHtcclxuXHRcdFx0Ly8gVXN0YXdpZW5pZSBkYW55Y2ggdyBsb2NhbFN0b3JhZ2VcclxuXHRcdFx0Y29uc3QgZGF0ZUFycmF5ID0gZGF0YS5zcGxpdCgnLScpO1xyXG5cdFx0XHRjb25zdCB5ZWFyID0gTnVtYmVyKGRhdGVBcnJheVswXSk7XHJcblx0XHRcdGNvbnN0IG1vbnRoID0gTnVtYmVyKGRhdGVBcnJheVsxXSkgLSAxO1xyXG5cdFx0XHRjb25zdCBkYXkgPSBOdW1iZXIoZGF0ZUFycmF5WzJdKTtcclxuXHJcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZERhdGUnLCBKU09OLnN0cmluZ2lmeSh7IHllYXIsIG1vbnRoLCBkYXkgfSkpO1xyXG5cclxuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0b3JlZERhdGUnLCBKU09OLnN0cmluZ2lmeSh7IHllYXIsIG1vbnRoIH0pKTtcclxuXHRcdH0pXHJcblx0XHQudGhlbigoKSA9PiBsb2NhdGlvbi5yZWxvYWQoKSlcclxuXHRcdC5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1d5c3TEhXBpxYIgYsWCxIVkOicsIGVycm9yKTtcclxuXHRcdH0pO1xyXG59O1xyXG5cclxuLy8gUG9iaWVyYW5pZSB3eWJyYW5laiBkYXR5IHogTG9jYWxTdG9yYWdlXHJcbmNvbnN0IHNlbGVjdGVkRGF0ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlbGVjdGVkRGF0ZScpKTtcclxuXHJcbmNvbnN0IHN0b3JlZERhdGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdG9yZWREYXRlJykpO1xyXG5cclxuXHJcblxyXG4vLyBUd29yemVuaWUga2FsZW5kYXJ6YSB6YWxlxbxuaWUgY3p5IHpvc3RhxYJhIHd5YnJhbmEgZGF0YVxyXG5pZiAoc2VsZWN0ZWREYXRlICYmIHN0b3JlZERhdGUpIHtcclxuXHRjcmVhdGVDYWxlbmRhcihzdG9yZWREYXRlLnllYXIsIHN0b3JlZERhdGUubW9udGgsIHNlbGVjdGVkRGF0ZS5kYXksIHNlbGVjdGVkRGF0ZS5tb250aCwgc2VsZWN0ZWREYXRlLnllYXIpO1xyXG59ICBlbHNlIHtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VsZWN0ZWREYXRlJywgSlNPTi5zdHJpbmdpZnkoeyB5ZWFyLCBtb250aCwgZGF5OiBjdXJyZW50RGF5IH0pKTtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc3RvcmVkRGF0ZScsIEpTT04uc3RyaW5naWZ5KHsgeWVhciwgbW9udGggfSkpO1xyXG5cdGNyZWF0ZUNhbGVuZGFyKHllYXIsIG1vbnRoLCBjdXJyZW50RGF5KTtcclxufVxyXG5cclxuLy9hZGRFdmVudExpc3RlbmVyJ3lcclxucHJldk1vbnRoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZWN0UHJldk1vbnRoKTtcclxubmV4dE1vbnRoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZWN0TmV4dE1vbnRoKTtcclxuIl19
