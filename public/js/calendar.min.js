"use strict";var monthYearDate=document.querySelector(".month-year"),numericDays=document.querySelector(".numeric-days"),prevMonthBtn=document.querySelector(".prev-month-btn"),nextMonthBtn=document.querySelector(".next-month-btn"),fullDate=new Date,currentDay=fullDate.getDate(),month=fullDate.getMonth(),year=fullDate.getFullYear(),setMonthYearDate=function(t,e){monthYearDate.innerHTML="".concat(["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"][t]," ").concat(e)},createCalendar=function(t,e){for(var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,o=(setMonthYearDate(e,t),new Date(t,e,1).getDay()),c=(0===o&&(o=7),new Date(t,e+1,0).getDate()),s=new Date(t,e,0).getDate(),l="<tr>",d=0,i=s-o+2;i<=s;i++)7===d&&(l+="</tr><tr>",d=0),l+='<td class="prev-month-day date">'.concat(i,"</td>"),d++;for(var m=1;m<=c;m++)7===d&&(l+="</tr><tr>",d=0),l+=(m===a&&e===n&&t===r||m===a?'<td class="date active">':'<td class="date">').concat(m,"</td>"),d++;if(0!==d){for(var h=7-d,y=1;y<=h;y++)l+='<td class="next-month-day date">'.concat(y,"</td>"),d++;d=0}numericDays.innerHTML=l+="</tr></tbody></table>",document.querySelectorAll(".date").forEach(function(t){return t.addEventListener("click",selectDate)})},selectPrevMonth=function(){var t=JSON.parse(localStorage.getItem("storedDate"))||{year:year,month:month},e=JSON.parse(localStorage.getItem("selectedDate"));0===t.month?(t.month=11,t.year--):t.month--,localStorage.setItem("storedDate",JSON.stringify(t)),createCalendar(t.year,t.month),t.month===e.month&&setActiveDate(e.day)},selectNextMonth=function(){var t=JSON.parse(localStorage.getItem("storedDate"))||{year:year,month:month},e=JSON.parse(localStorage.getItem("selectedDate"));11===t.month?(t.month=0,t.year++):t.month++,localStorage.setItem("storedDate",JSON.stringify(t)),createCalendar(t.year,t.month),t.month===e.month&&setActiveDate(e.day)},setActiveDate=function(e){var t=document.querySelectorAll(".date"),t=Array.from(t).find(function(t){return t.textContent===e.toString()&&!t.classList.contains("prev-month-day")&&!t.classList.contains("next-month-day")});t&&t.classList.add("active")},selectDate=function(t){var e=Number(t.target.textContent),a=JSON.parse(localStorage.getItem("storedDate"))||{year:year,month:month},t=(t.target.classList.contains("next-month-day")&&11===a.month?(a.month=0,a.year++):t.target.classList.contains("next-month-day")?a.month++:t.target.classList.contains("prev-month-day")&&0===a.month?(a.month=11,a.year--):t.target.classList.contains("prev-month-day")&&a.month--,"".concat(a.year,"-").concat(a.month+1,"-").concat(e));sendDateData(t)},sendDateData=function(t){fetch("../app/includes/selected_date.inc.php",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:"date="+t}).then(function(t){return t.json()}).then(function(t){var t=t.split("-"),e=Number(t[0]),a=Number(t[1])-1,t=Number(t[2]);localStorage.setItem("selectedDate",JSON.stringify({year:e,month:a,day:t})),localStorage.setItem("storedDate",JSON.stringify({year:e,month:a}))}).then(function(){return location.reload()}).catch(function(t){console.error("Wystąpił błąd:",t)})},selectedDate=JSON.parse(localStorage.getItem("selectedDate")),storedDate=JSON.parse(localStorage.getItem("storedDate"));selectedDate&&storedDate?createCalendar(storedDate.year,storedDate.month,selectedDate.day,selectedDate.month,selectedDate.year):(localStorage.setItem("selectedDate",JSON.stringify({year:year,month:month,day:currentDay})),localStorage.setItem("storedDate",JSON.stringify({year:year,month:month})),createCalendar(year,month,currentDay)),prevMonthBtn.addEventListener("click",selectPrevMonth),nextMonthBtn.addEventListener("click",selectNextMonth);