"use strict";var monthYearDate=document.querySelector(".month-year"),numericDays=document.querySelector(".numeric-days"),prevMonthBtn=document.querySelector(".prev-month-btn"),nextMonthBtn=document.querySelector(".next-month-btn"),fullDate=new Date,currentDay=fullDate.getDate(),month=fullDate.getMonth(),year=fullDate.getFullYear(),setMonthYearDate=function(t,e){monthYearDate.innerHTML="".concat(["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"][t]," ").concat(e)},createCalendar=function(t,e){for(var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=(setMonthYearDate(e,t),new Date(t,e,1).getDay()),r=(0===n&&(n=7),new Date(t,e+1,0).getDate()),o=new Date(t,e,0).getDate(),c="<tr>",s=0,l=o-n+2;l<=o;l++)7===s&&(c+="</tr><tr>",s=0),c+='<td class="prev-month-day date">'.concat(l,"</td>"),s++;for(var d=1;d<=r;d++)7===s&&(c+="</tr><tr>",s=0),c+=(d===a?'<td class="date active">':'<td class="date">').concat(d,"</td>"),s++;if(0!==s){for(var i=7-s,m=1;m<=i;m++)c+='<td class="next-month-day date">'.concat(m,"</td>"),s++;s=0}numericDays.innerHTML=c+="</tr></tbody></table>",document.querySelectorAll(".date").forEach(function(t){return t.addEventListener("click",selectDate)})},selectPrevMonth=function(){var t=JSON.parse(localStorage.getItem("storedDate"))||{year:year,month:month},e=JSON.parse(localStorage.getItem("selectedDate"));0===t.month?(t.month=11,t.year--):t.month--,localStorage.setItem("storedDate",JSON.stringify(t)),createCalendar(t.year,t.month),t.month===e.month&&setActiveDate(e.day)},selectNextMonth=function(){var t=JSON.parse(localStorage.getItem("storedDate"))||{year:year,month:month},e=JSON.parse(localStorage.getItem("selectedDate"));11===t.month?(t.month=0,t.year++):t.month++,localStorage.setItem("storedDate",JSON.stringify(t)),createCalendar(t.year,t.month),t.month===e.month&&setActiveDate(e.day)},setActiveDate=function(e){var t=document.querySelectorAll(".date"),t=Array.from(t).find(function(t){return t.textContent===e.toString()&&!t.classList.contains("prev-month-day")&&!t.classList.contains("next-month-day")});t&&t.classList.add("active")},selectDate=function(t){var e=Number(t.target.textContent),a=JSON.parse(localStorage.getItem("storedDate"))||{year:year,month:month},t=(t.target.classList.contains("next-month-day")&&11===a.month?(a.month=0,a.year++):t.target.classList.contains("next-month-day")?a.month++:t.target.classList.contains("prev-month-day")&&0===a.month?(a.month=11,a.year--):t.target.classList.contains("prev-month-day")&&a.month--,"".concat(a.year,"-").concat(a.month+1,"-").concat(e));sendDateData(t)},sendDateData=function(t){fetch("../app/includes/selected_date.inc.php",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:"date="+t}).then(function(t){return t.json()}).then(function(t){var t=t.split("-"),e=Number(t[0]),a=Number(t[1])-1,t=Number(t[2]);localStorage.setItem("selectedDate",JSON.stringify({year:e,month:a,day:t})),localStorage.setItem("storedDate",JSON.stringify({year:e,month:a}))}).then(function(){return location.reload()}).catch(function(t){console.error("Wystąpił błąd:",t)})},selectedDate=JSON.parse(localStorage.getItem("selectedDate")),storedDate=JSON.parse(localStorage.getItem("storedDate"));selectedDate&&storedDate?createCalendar(selectedDate.year,selectedDate.month,selectedDate.day):(localStorage.setItem("selectedDate",JSON.stringify({year:year,month:month,day:currentDay})),localStorage.setItem("storedDate",JSON.stringify({year:year,month:month})),createCalendar(year,month,currentDay)),prevMonthBtn.addEventListener("click",selectPrevMonth),nextMonthBtn.addEventListener("click",selectNextMonth);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbGVuZGFyLmpzIl0sIm5hbWVzIjpbIm1vbnRoWWVhckRhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJudW1lcmljRGF5cyIsIm5leHRNb250aEJ0biIsImN1cnJlbnREYXkiLCJmdWxsRGF0ZSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGhOYW1lcyIsImRheUNvdW50ZXIiLCJjb25jYXQiLCJzZXRNb250aFllYXJEYXRlIiwiZmlyc3REYXkiLCJzdGFydFByZXZNb250aERheSIsImNyZWF0ZUNhbGVuZGFyIiwic2VsZWN0ZWREYXkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJEYXRlIiwiZ2V0RGF5IiwibGFzdERheSIsImxhc3REYXlPZkxhc3RNb250aCIsInRhYmxlSFRNTCIsImkiLCJsZWZ0RGF5cyIsInRkRWxlbWVudHMiLCJ0ZCIsInNlbGVjdERhdGUiLCJzZWxlY3RlZERhdGUiLCJKU09OIiwibG9jYWxTdG9yYWdlIiwic3RvcmVkRGF0ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZWxlY3ROZXh0TW9udGgiLCJhZGRFdmVudExpc3RlbmVyIiwicGFyc2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNldEFjdGl2ZURhdGUiLCJ0ZXh0Q29udGVudCIsInRkQWN0aXZlIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJmaW5kIiwic2VuZERhdGVEYXRhIiwidG9TdHJpbmciLCJmZXRjaCIsImFkZCIsInRoZW4iLCJlIiwiZGF5IiwicmVzcG9uc2UiLCJqc29uIiwiZGF0YSIsImRhdGUiLCJkYXRlQXJyYXkiLCJOdW1iZXIiLCJsb2NhdGlvbiIsIm1ldGhvZCIsImhlYWRlcnMiLCJDb250ZW50LXR5cGUiLCJib2R5Iiwic3BsaXQiLCJyZWxvYWQiLCJlcnJvciIsImNvbnNvbGUiLCJwcmV2TW9udGhCdG4iLCJzZWxlY3RQcmV2TW9u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QWFNLFFBQVEsWUFBWSxDQUFDLEVBRzVEUixjQUFnQkcsV0FDbkJsQixlQUFlZSxhQUFhdkIsS0FBTXVCLGFBQWF6QixNQUFPeUIsYUFBYXdCLEdBQUcsR0FFdEV0QixhQUFhTyxRQUFRLGVBQWdCUixLQUFLUyxVQUFVLENBQUVqQyxLQUFBQSxLQUFNRixNQUFBQSxNQUFPaUQsSUFBS3BELFVBQVcsQ0FBQyxDQUFDLEVBQ3JGOEIsYUFBYU8sUUFBUSxhQUFjUixLQUFLUyxVQUFVLENBQUVqQyxLQUFBQSxLQUFNRixNQUFBQSxLQUFNLENBQUMsQ0FBQyxFQUNsRVUsZUFBZVIsS0FBTUYsTUFBT0gsVUFBVSxHQUl2Q29FLGFBQWFsQyxpQkFBaUIsUUFBU21DLGVBQWUsRUFDdER0RSxhQUFhbUMsaUJBQWlCLFFBQVNELGVBQWUiLCJmaWxlIjoiY2FsZW5kYXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9udGhZZWFyRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb250aC15ZWFyJyk7XHJcbmNvbnN0IG51bWVyaWNEYXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm51bWVyaWMtZGF5cycpO1xyXG5jb25zdCBwcmV2TW9udGhCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJldi1tb250aC1idG4nKTtcclxuY29uc3QgbmV4dE1vbnRoQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5leHQtbW9udGgtYnRuJyk7XHJcblxyXG5jb25zdCBmdWxsRGF0ZSA9IG5ldyBEYXRlKCk7XHJcblxyXG5sZXQgY3VycmVudERheSA9IGZ1bGxEYXRlLmdldERhdGUoKTtcclxubGV0IG1vbnRoID0gZnVsbERhdGUuZ2V0TW9udGgoKTtcclxubGV0IHllYXIgPSBmdWxsRGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuY29uc3Qgc2V0TW9udGhZZWFyRGF0ZSA9IChtb250aCwgeWVhcikgPT4ge1xyXG5cdGNvbnN0IG1vbnRoTmFtZXMgPSBbXHJcblx0XHQnU3R5Y3plxYQnLFxyXG5cdFx0J0x1dHknLFxyXG5cdFx0J01hcnplYycsXHJcblx0XHQnS3dpZWNpZcWEJyxcclxuXHRcdCdNYWonLFxyXG5cdFx0J0N6ZXJ3aWVjJyxcclxuXHRcdCdMaXBpZWMnLFxyXG5cdFx0J1NpZXJwaWXFhCcsXHJcblx0XHQnV3J6ZXNpZcWEJyxcclxuXHRcdCdQYcW6ZHppZXJuaWsnLFxyXG5cdFx0J0xpc3RvcGFkJyxcclxuXHRcdCdHcnVkemllxYQnLFxyXG5cdF07XHJcblx0Y29uc3QgbW9udGhOYW1lID0gbW9udGhOYW1lc1ttb250aF07XHJcblx0bW9udGhZZWFyRGF0ZS5pbm5lckhUTUwgPSBgJHttb250aE5hbWV9ICR7eWVhcn1gO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlQ2FsZW5kYXIgPSAoeWVhciwgbW9udGgsIHNlbGVjdGVkRGF5ID0gbnVsbCkgPT4ge1xyXG5cdHNldE1vbnRoWWVhckRhdGUobW9udGgsIHllYXIpO1xyXG5cclxuXHRsZXQgZmlyc3REYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSkuZ2V0RGF5KCk7XHJcblx0Zmlyc3REYXkgPT09IDAgJiYgKGZpcnN0RGF5ID0gNyk7XHJcblx0Y29uc3QgbGFzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgMCkuZ2V0RGF0ZSgpO1xyXG5cdGNvbnN0IGxhc3REYXlPZkxhc3RNb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKS5nZXREYXRlKCk7XHJcblxyXG5cdGxldCB0YWJsZUhUTUwgPSAnPHRyPic7XHJcblxyXG5cdGNvbnN0IHN0YXJ0UHJldk1vbnRoRGF5ID0gbGFzdERheU9mTGFzdE1vbnRoIC0gZmlyc3REYXkgKyAyO1xyXG5cclxuXHRsZXQgZGF5Q291bnRlciA9IDA7XHJcblx0Ly9Eb2Rhd2FuaWUgZG5pIHogcG9wcnplZG5pZWdvIG1pZXNpxIVjYVxyXG5cdGZvciAobGV0IGkgPSBzdGFydFByZXZNb250aERheTsgaSA8PSBsYXN0RGF5T2ZMYXN0TW9udGg7IGkrKykge1xyXG5cdFx0aWYgKGRheUNvdW50ZXIgPT09IDcpIHtcclxuXHRcdFx0dGFibGVIVE1MICs9ICc8L3RyPjx0cj4nO1xyXG5cclxuXHRcdFx0ZGF5Q291bnRlciA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0dGFibGVIVE1MICs9IGA8dGQgY2xhc3M9XCJwcmV2LW1vbnRoLWRheSBkYXRlXCI+JHtpfTwvdGQ+YDtcclxuXHJcblx0XHRkYXlDb3VudGVyKys7XHJcblx0fVxyXG5cdC8vRG9kYXdhbmllIGRuaSB6IGFrdHVhbG5lZ28gbWllc2nEhWNhXHJcblx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gbGFzdERheTsgaSsrKSB7XHJcblx0XHRpZiAoZGF5Q291bnRlciA9PT0gNykge1xyXG5cdFx0XHR0YWJsZUhUTUwgKz0gJzwvdHI+PHRyPic7XHJcblxyXG5cdFx0XHRkYXlDb3VudGVyID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoaSA9PT0gc2VsZWN0ZWREYXkpIHtcclxuXHRcdFx0dGFibGVIVE1MICs9IGA8dGQgY2xhc3M9XCJkYXRlIGFjdGl2ZVwiPiR7aX08L3RkPmA7XHJcblx0XHR9IGVsc2UgaWYgKGkgPT09IHNlbGVjdGVkRGF5KXtcclxuXHRcdFx0dGFibGVIVE1MICs9IGA8dGQgY2xhc3M9XCJkYXRlIGFjdGl2ZVwiPiR7aX08L3RkPmA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0YWJsZUhUTUwgKz0gYDx0ZCBjbGFzcz1cImRhdGVcIj4ke2l9PC90ZD5gO1xyXG5cdFx0fVxyXG5cdFx0ZGF5Q291bnRlcisrO1xyXG5cdH1cclxuXHQvL0RvZGF3YW5pZSBkbmkgeiBuYXN0ZXBuZWdvIG1pZXNpxIVjYVxyXG5cdGlmIChkYXlDb3VudGVyICE9PSAwKSB7XHJcblx0XHRjb25zdCBsZWZ0RGF5cyA9IDcgLSBkYXlDb3VudGVyO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IGxlZnREYXlzOyBpKyspIHtcclxuXHRcdFx0dGFibGVIVE1MICs9IGA8dGQgY2xhc3M9XCJuZXh0LW1vbnRoLWRheSBkYXRlXCI+JHtpfTwvdGQ+YDtcclxuXHJcblx0XHRcdGRheUNvdW50ZXIrKztcclxuXHRcdH1cclxuXHRcdGRheUNvdW50ZXIgPSAwO1xyXG5cdH1cclxuXHJcblx0dGFibGVIVE1MICs9ICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nO1xyXG5cdG51bWVyaWNEYXlzLmlubmVySFRNTCA9IHRhYmxlSFRNTDtcclxuXHJcblx0Ly9Vc3Rhd2lhbmllIGxpc3RlbmVyw7N3IG5hIGRhdHlcclxuXHRjb25zdCB0ZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUnKTtcclxuXHR0ZEVsZW1lbnRzLmZvckVhY2godGQgPT4gdGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY3REYXRlKSk7XHJcblxyXG5cdC8vIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzdG9yZWREYXRlJylcclxufTtcclxuXHJcbi8vV3liaWVyYW5pZSBpbm55Y2ggbWllc2nEmWN5XHJcbmNvbnN0IHNlbGVjdFByZXZNb250aCA9ICgpID0+IHtcclxuXHRsZXQgc3RvcmVkRGF0ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0b3JlZERhdGUnKSkgfHwgeyB5ZWFyLCBtb250aCB9O1xyXG5jb25zdCBzZWxlY3RlZERhdGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxlY3RlZERhdGUnKSlcclxuXHRpZiAoc3RvcmVkRGF0ZS5tb250aCA9PT0gMCkge1xyXG5cdFx0c3RvcmVkRGF0ZS5tb250aCA9IDExO1xyXG5cdFx0c3RvcmVkRGF0ZS55ZWFyLS07XHJcblx0fSBlbHNlIHtcclxuXHRcdHN0b3JlZERhdGUubW9udGgtLTtcclxuXHR9XHJcblxyXG5cdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdG9yZWREYXRlJywgSlNPTi5zdHJpbmdpZnkoc3RvcmVkRGF0ZSkpO1xyXG5cdGNyZWF0ZUNhbGVuZGFyKHN0b3JlZERhdGUueWVhciwgc3RvcmVkRGF0ZS5tb250aCk7XHJcblxyXG5cdGlmIChzdG9yZWREYXRlLm1vbnRoID09PSBzZWxlY3RlZERhdGUubW9udGgpIHtcclxuXHRcdHNldEFjdGl2ZURhdGUoc2VsZWN0ZWREYXRlLmRheSk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3Qgc2VsZWN0TmV4dE1vbnRoID0gKCkgPT4ge1xyXG5cdGxldCBzdG9yZWREYXRlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RvcmVkRGF0ZScpKSB8fCB7IHllYXIsIG1vbnRoIH07XHJcbmNvbnN0IHNlbGVjdGVkRGF0ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlbGVjdGVkRGF0ZScpKVxyXG5cdGlmIChzdG9yZWREYXRlLm1vbnRoID09PSAxMSkge1xyXG5cdFx0c3RvcmVkRGF0ZS5tb250aCA9IDA7XHJcblx0XHRzdG9yZWREYXRlLnllYXIrKztcclxuXHR9IGVsc2Uge1xyXG5cdFx0c3RvcmVkRGF0ZS5tb250aCsrO1xyXG5cdH1cclxuXHJcblx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0b3JlZERhdGUnLCBKU09OLnN0cmluZ2lmeShzdG9yZWREYXRlKSk7XHJcblx0Y3JlYXRlQ2FsZW5kYXIoc3RvcmVkRGF0ZS55ZWFyLCBzdG9yZWREYXRlLm1vbnRoKTtcclxuXHJcblx0aWYgKHN0b3JlZERhdGUubW9udGggPT09IHNlbGVjdGVkRGF0ZS5tb250aCkge1xyXG5cdFx0c2V0QWN0aXZlRGF0ZShzZWxlY3RlZERhdGUuZGF5KTtcclxuXHR9XHJcbn07XHJcblxyXG4vLyBVc3Rhd2llbmllIGFrdHl3bmVqIGRhdHkgamXFm2xpIHd5YnJhbnkgbWllc2nEhWMgamVzdCByw7N3bnkgYWt0dWFsbmVtdVxyXG5jb25zdCBzZXRBY3RpdmVEYXRlID0gKHNlbGVjdGVkRGF5KSA9PiB7XHJcblxyXG5cdGNvbnN0IHRkRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZScpO1xyXG5cdGNvbnN0IHRkQXJyYXkgPSBBcnJheS5mcm9tKHRkRWxlbWVudHMpO1xyXG5cclxuXHRjb25zdCB0ZEFjdGl2ZSA9IHRkQXJyYXkuZmluZChcclxuXHRcdHRkID0+XHJcblx0XHRcdHRkLnRleHRDb250ZW50ID09PSBzZWxlY3RlZERheS50b1N0cmluZygpICYmXHJcblx0XHRcdCF0ZC5jbGFzc0xpc3QuY29udGFpbnMoJ3ByZXYtbW9udGgtZGF5JykgJiZcclxuXHRcdFx0IXRkLmNsYXNzTGlzdC5jb250YWlucygnbmV4dC1tb250aC1kYXknKVxyXG5cdCk7XHJcblxyXG5cdGlmICh0ZEFjdGl2ZSkge1xyXG5cdFx0dGRBY3RpdmUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0fVxyXG59O1xyXG5cclxuLy9XeWJpZXJhbmllIHphZGHFhCB6IGlubmVqIGRhdHlcclxuY29uc3Qgc2VsZWN0RGF0ZSA9IGUgPT4ge1xyXG5cdGxldCBkYXkgPSBOdW1iZXIoZS50YXJnZXQudGV4dENvbnRlbnQpO1xyXG5cdGxldCBzdG9yZWREYXRlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RvcmVkRGF0ZScpKSB8fCB7IHllYXIsIG1vbnRoIH07XHJcblxyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ25leHQtbW9udGgtZGF5JykgJiYgc3RvcmVkRGF0ZS5tb250aCA9PT0gMTEpIHtcclxuXHRcdHN0b3JlZERhdGUubW9udGggPSAwO1xyXG5cdFx0c3RvcmVkRGF0ZS55ZWFyKys7XHJcblx0fSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ25leHQtbW9udGgtZGF5JykpIHtcclxuXHRcdHN0b3JlZERhdGUubW9udGgrKztcclxuXHR9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJldi1tb250aC1kYXknKSAmJiBzdG9yZWREYXRlLm1vbnRoID09PSAwKSB7XHJcblx0XHRzdG9yZWREYXRlLm1vbnRoID0gMTE7XHJcblx0XHRzdG9yZWREYXRlLnllYXItLTtcclxuXHR9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJldi1tb250aC1kYXknKSkge1xyXG5cdFx0c3RvcmVkRGF0ZS5tb250aC0tO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZGF0ZSA9IGAke3N0b3JlZERhdGUueWVhcn0tJHtzdG9yZWREYXRlLm1vbnRoICsgMX0tJHtkYXl9YDtcclxuXHJcblx0c2VuZERhdGVEYXRhKGRhdGUpO1xyXG59O1xyXG5cclxuLy9XeXN5xYJhbmllIGRhbnljaFxyXG5jb25zdCBzZW5kRGF0ZURhdGEgPSBkYXRlID0+IHtcclxuXHRmZXRjaCgnLi4vYXBwL2luY2x1ZGVzL3NlbGVjdGVkX2RhdGUuaW5jLnBocCcsIHtcclxuXHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHQnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHR9LFxyXG5cdFx0Ym9keTogJ2RhdGU9JyArIGRhdGUsXHJcblx0fSlcclxuXHRcdC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuXHRcdC50aGVuKGRhdGEgPT4ge1xyXG5cdFx0XHQvLyBVc3Rhd2llbmllIGRhbnljaCB3IGxvY2FsU3RvcmFnZVxyXG5cdFx0XHRjb25zdCBkYXRlQXJyYXkgPSBkYXRhLnNwbGl0KCctJyk7XHJcblx0XHRcdGNvbnN0IHllYXIgPSBOdW1iZXIoZGF0ZUFycmF5WzBdKTtcclxuXHRcdFx0Y29uc3QgbW9udGggPSBOdW1iZXIoZGF0ZUFycmF5WzFdKSAtIDE7XHJcblx0XHRcdGNvbnN0IGRheSA9IE51bWJlcihkYXRlQXJyYXlbMl0pO1xyXG5cclxuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdGVkRGF0ZScsIEpTT04uc3RyaW5naWZ5KHsgeWVhciwgbW9udGgsIGRheSB9KSk7XHJcblxyXG5cdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc3RvcmVkRGF0ZScsIEpTT04uc3RyaW5naWZ5KHsgeWVhciwgbW9udGggfSkpO1xyXG5cdFx0fSlcclxuXHRcdC50aGVuKCgpID0+IGxvY2F0aW9uLnJlbG9hZCgpKVxyXG5cdFx0LmNhdGNoKGVycm9yID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignV3lzdMSFcGnFgiBixYLEhWQ6JywgZXJyb3IpO1xyXG5cdFx0fSk7XHJcbn07XHJcblxyXG4vLyBQb2JpZXJhbmllIHd5YnJhbmVqIGRhdHkgeiBMb2NhbFN0b3JhZ2VcclxuY29uc3Qgc2VsZWN0ZWREYXRlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0ZWREYXRlJykpO1xyXG5cclxuY29uc3Qgc3RvcmVkRGF0ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0b3JlZERhdGUnKSk7XHJcblxyXG4vLyBUd29yemVuaWUga2FsZW5kYXJ6YSB6YWxlxbxuaWUgY3p5IHpvc3RhxYJhIHd5YnJhbmEgZGF0YVxyXG5pZiAoc2VsZWN0ZWREYXRlICYmIHN0b3JlZERhdGUpIHtcclxuXHRjcmVhdGVDYWxlbmRhcihzZWxlY3RlZERhdGUueWVhciwgc2VsZWN0ZWREYXRlLm1vbnRoLCBzZWxlY3RlZERhdGUuZGF5KTtcclxufSAgZWxzZSB7XHJcblx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdGVkRGF0ZScsIEpTT04uc3RyaW5naWZ5KHsgeWVhciwgbW9udGgsIGRheTogY3VycmVudERheSB9KSk7XHJcblx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0b3JlZERhdGUnLCBKU09OLnN0cmluZ2lmeSh7IHllYXIsIG1vbnRoIH0pKTtcclxuXHRjcmVhdGVDYWxlbmRhcih5ZWFyLCBtb250aCwgY3VycmVudERheSk7XHJcbn1cclxuXHJcbi8vYWRkRXZlbnRMaXN0ZW5lcid5XHJcbnByZXZNb250aEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGVjdFByZXZNb250aCk7XHJcbm5leHRNb250aEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGVjdE5leHRNb250aCk7XHJcbiJdfQ==
