"use strict";var removeTodoBtns=document.querySelectorAll(".remove-todo-btn"),editTodoBtns=document.querySelectorAll(".edit-todo-btn"),saveChangesBtn=document.querySelector(".save-changes"),editTodoInput=document.querySelector(".edit-todo-input"),editTodoDescription=document.querySelector(".edit-todo-description"),checkboxes=document.querySelectorAll(".todo-checkbox"),editTodoModal=document.getElementById("editTodoModal"),addTodoModal=document.getElementById("addTodoModal"),addTodoTitle=document.querySelector(".add-todo-title"),addTodoDescription=document.querySelector(".add-todo-description"),addTodoBtn=document.querySelector(".add-todo-btn"),todoId=null,setTaskCounter=function(){var e=document.querySelectorAll(".todo"),o=document.querySelector(".task-counter"),t=e.length;o.innerHTML=2<=t?"Masz ".concat(e.length," zadania do zrobienia"):1===t?"Masz jedno zadanie do zrobienia":"Nie masz żadnych zadań do zrobienia"},removeTodo=(setTaskCounter(),function(e){e.stopPropagation();var e=e.currentTarget.getAttribute("data-todo-id"),o=document.getElementById(e);fetch("../app/includes/remove_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).then(o.remove()).catch(function(e){console.error("Wystąpił błąd:",e)}),setTaskCounter()}),setEditTitleError=function(){editTodoInput.classList.add("error"),editTodoInput.nextElementSibling.classList.remove("d-none")},clearEditTitleError=function(){editTodoInput.classList.remove("error"),editTodoInput.nextElementSibling.classList.add("d-none")},updateTodo=function(e){var o,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;""===t?setEditTitleError():((o=new URLSearchParams).append("id",e),o.append("title",t),o.append("description",d),fetch("../app/includes/edit_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o}).then(function(){return location.reload()}).catch(function(e){console.error("Wystąpił błąd:",e)}))},setAddTodoTitleError=function(){addTodoTitle.classList.add("error"),addTodoTitle.nextElementSibling.classList.remove("d-none")},clearAddTodoError=function(){addTodoTitle.classList.remove("error"),addTodoTitle.nextElementSibling.classList.add("d-none")},toggleCompleteTodo=function(e){var e=e.currentTarget.getAttribute("data-todo-id"),o=document.getElementById(e);o.classList.contains("todo-done")?o.classList.remove("todo-done"):o.classList.add("todo-done"),fetch("../app/includes/complete_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).catch(function(e){console.error("Wystąpił błąd:",e)})},setEditInputs=function(e){todoId=e.currentTarget.getAttribute("data-todo-id");var e=document.querySelector('.todo-title[data-todo-id="'.concat(todoId,'"]')),o=document.querySelector('.todo-description[data-todo-id="'.concat(todoId,'"]'));editTodoInput.value=e.textContent,editTodoDescription.value=o.textContent};editTodoModal.addEventListener("hidden.bs.modal",function(){editTodoInput.value="",editTodoDescription.value="",todoId=null,clearEditTitleError()}),addTodoModal.addEventListener("hidden.bs.modal",function(){addTodoTitle.value="",addTodoDescription.value="",clearAddTodoError()}),addTodoBtn.addEventListener("click",function(e){""===addTodoTitle.value&&(e.preventDefault(),setAddTodoTitleError())}),addTodoTitle.addEventListener("input",clearAddTodoError),removeTodoBtns.forEach(function(e){e.addEventListener("click",removeTodo)}),editTodoBtns.forEach(function(e){e.addEventListener("click",setEditInputs)}),checkboxes.forEach(function(e){e.addEventListener("click",toggleCompleteTodo)}),editTodoInput.addEventListener("input",clearEditTitleError),saveChangesBtn.addEventListener("click",function(){var e,o;todoId&&(e=editTodoInput.value,o=editTodoDescription.value,updateTodo(todoId,e,o))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG9saXN0LmpzIl0sIm5hbWVzIjpbInJlbW92ZVRvZG9CdG5zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWRpdFRvZG9CdG5zIiwic2F2ZUNoYW5nZXNCdG4iLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFRvZG9JbnB1dCIsImVkaXRUb2RvRGVzY3JpcHRpb24iLCJjaGVja2JveGVzIiwiZWRpdFRvZG9Nb2RhbCIsImdldEVsZW1lbnRCeUlkIiwiYWRkVG9kb01vZGFsIiwiYWRkVG9kb1RpdGxlIiwiYWRkVG9kb0J0biIsInNldFRhc2tDb3VudGVyIiwidG9kb0l0ZW1zIiwidGFza0NvdW50ZXIiLCJ0YXNrc0Ftb3VudCIsImxlbmd0aCIsImlubmVySFRNTCIsImNvbmNhdCIsImZldGNoIiwiY3VycmVudFRhcmdldCIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJoZWFkZXJzIiwiZ2V0QXR0cmlidXRlIiwidG9kb0RpdiIsImlkIiwiYm9keSIsIm1ldGhvZCIsIkNvbnRlbnQtVHlwZSIsImNsYXNzTGlzdCIsImVycm9yUGFyYWdyYXBoIiwiZXJyb3IiLCJjbGVhckVkaXRUaXRsZUVycm9yIiwiYWRkIiwidG9kb0lkIiwiYXJndW1lbnRzIiwic2V0RWRpdFRpdGxlRXJyb3IiLCJyZW1vdmUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJVUkxTZWFyY2hQYXJhbXMiLCJ0aGVuIiwidGl0bGUiLCJ1bmRlZmluZWQiLCJkZXNjcmlwdGlvbiIsImFwcGVuZCIsImxvY2F0aW9uIiwicmVsb2FkIiwicGFyYW1zIiwiY29uc29sZSIsInNldEFkZFRvZG9UaXRsZUVycm9yIiwiY2xlYXJBZGRUb2RvRXJyb3IiLCJjb250YWlucyIsInNldEVkaXRJbnB1dHMiLCJ0aXRsZVBhcmFncmFwaCIsImRlc2NyaXB0aW9uUGFyYWdyYXBoIiwidmFsdWUiLCJhZGRUb2RvRGVzY3JpcHRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0ZXh0Q29udGVudCIsImZvckVhY2giLCJidG4iLCJyZW1vdmVUb2RvIiwiY2hlY2tib3giLCJ0b2dnbGVDb21wbGV0ZVRvZG8iLCJ1cGRhdGVUb2RvIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxlQUFpQkMsU0FBU0MsaUJBQWlCLGtCQUFrQixFQUM3REMsYUFBZUYsU0FBU0MsaUJBQWlCLGdCQUFnQixFQUR6REYsZUFBaUJDLFNBQVNDLGNBQWdCLGVBQUMsRUFDM0NDLGNBQWVGLFNBQVNDLGNBQWlCLGtCQUFpQixFQUMxREUsb0JBQWlCSCxTQUFTSSxjQUFjLHdCQUFnQixFQUN4REMsV0FBYUwsU0FBV0MsaUJBQWUsZ0JBQWtCLEVBQ3pESyxjQUFBQSxTQUFzQk4sZUFBU0ksZUFBYyxFQUM3Q0csYUFBYVAsU0FBU0MsZUFBaUIsY0FBZ0IsRUFDdkRPLGFBQWdCUixTQUFTUyxjQUFlLGlCQUFnQixFQUN4REMsbUJBQXVCVixTQUFDUyxjQUFlLHVCQUFlLEVBQ3RERSxXQUFlWCxTQUFTSSxjQUFjLGVBQUEsRUFFdENRLE9BQUFBLEtBSUFDLGVBQWlCLFdBQ25CLElBQU1DLEVBQVlkLFNBQVNDLGlCQUFpQixPQUFRLEVBQzlDYyxFQUFjZixTQUFTSSxjQUFjLGVBQWdCLEVBSXZEWSxFQUFrQkYsRUFBQUcsT0FHbEJGLEVBQVlHLFVBRExGLEdBQVZBLEVBQ3dCLFFBQUFHLE9BQUFMLEVBQUFHLE9BQUEsdUJBQUEsRUFDbEIsSUFBQUQsRUFDa0Isa0NBRTVCLHFDQUlELEVBS0NJLFlBUERQLGVBSWNRLEVBR1AsU0FBQUMsR0FKTkEsRUFBRUMsZ0JBS2EsRUFKZixJQUtDQyxFQUFPRixFQUFFRCxjQUFBSSxhQUFBLGNBQUEsRUFDUkMsRUFBQTFCLFNBQWdCUyxlQUFBa0IsQ0FBQSxFQUhsQlAsTUFLQ1Esc0NBQWNELENBQ2ZFLE9BQ09ILE9BTE5GLFFBT1EsQ0FDUE0sZUFBQyxtQ0FDSGpCLEVBQ0FlLEtBQUEsTUFBQUQsQ0FFRCxDQUFBLEVBQ0N0QixLQUFBQSxFQUFjMEIsT0FBQUEsQ0FBQUEsRUFBUyxNQUNqQkMs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cUMsZUFBZSxFQUNqQlIscUJBQXFCLEVBSXZCLENBQUUsRUFFRnhDLGFBQWFpRCxpQkFBaUIsUUFBU1IsaUJBQWlCLEVBRXhEckQsZUFBZStELFFBQVEsU0FBQUMsR0FDdEJBLEVBQUlILGlCQUFpQixRQUFTSSxVQUFVLENBQ3pDLENBQUMsRUFDRDlELGFBQWE0RCxRQUFRLFNBQUFDLEdBQ3BCQSxFQUFJSCxpQkFBaUIsUUFBU04sYUFBYSxDQUM1QyxDQUFDLEVBQ0QvQyxXQUFXdUQsUUFBUSxTQUFBRyxHQUNsQkEsRUFBU0wsaUJBQWlCLFFBQVNNLGtCQUFrQixDQUN0RCxDQUFDLEVBRUQ3RCxjQUFjdUQsaUJBQWlCLFFBQVMxQixtQkFBbUIsRUFFM0QvQixlQUFleUQsaUJBQWlCLFFBQVMsV0FDeEMsSUFDT2pCLEVBQ0FFLEVBRkhULFNBQ0dPLEVBQVF0QyxjQUFjb0QsTUFDdEJaLEVBQWN2QyxvQkFBb0JtRCxNQUN4Q1UsV0FBVy9CLE9BQVFPLEVBQU9FLENBQVcsRUFFdkMsQ0FBQyIsImZpbGUiOiJ0b2RvbGlzdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZW1vdmVUb2RvQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZW1vdmUtdG9kby1idG4nKTtcclxuY29uc3QgZWRpdFRvZG9CdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVkaXQtdG9kby1idG4nKTtcclxuY29uc3Qgc2F2ZUNoYW5nZXNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2F2ZS1jaGFuZ2VzJyk7XHJcbmNvbnN0IGVkaXRUb2RvSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10b2RvLWlucHV0Jyk7XHJcbmNvbnN0IGVkaXRUb2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10b2RvLWRlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kby1jaGVja2JveCcpO1xyXG5jb25zdCBlZGl0VG9kb01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRUb2RvTW9kYWwnKTtcclxuY29uc3QgYWRkVG9kb01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFRvZG9Nb2RhbCcpO1xyXG5jb25zdCBhZGRUb2RvVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8tdGl0bGUnKTtcclxuY29uc3QgYWRkVG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLWRlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IGFkZFRvZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8tYnRuJylcclxuXHJcbmxldCB0b2RvSWQgPSBudWxsO1xyXG5cclxuY29uc3Qgc2V0VGFza0NvdW50ZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB0b2RvSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kbycpO1xyXG4gICAgY29uc3QgdGFza0NvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1jb3VudGVyJyk7XHJcblxyXG4gICAgY29uc3QgdGFza3NBbW91bnQgPSB0b2RvSXRlbXMubGVuZ3RoO1xyXG5cclxuICAgIGlmICh0YXNrc0Ftb3VudCA+PSAyKSB7XHJcbiAgICAgICAgdGFza0NvdW50ZXIuaW5uZXJIVE1MID0gYE1hc3ogJHt0b2RvSXRlbXMubGVuZ3RofSB6YWRhbmlhIGRvIHpyb2JpZW5pYWA7XHJcbiAgICB9IGVsc2UgaWYgKHRhc2tzQW1vdW50ID09PSAxKSB7XHJcbiAgICAgICAgdGFza0NvdW50ZXIuaW5uZXJIVE1MID0gYE1hc3ogamVkbm8gemFkYW5pZSBkbyB6cm9iaWVuaWFgO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0YXNrQ291bnRlci5pbm5lckhUTUwgPSBgTmllIG1hc3ogxbxhZG55Y2ggemFkYcWEIGRvIHpyb2JpZW5pYWA7XHJcbiAgICB9XHJcbn07XHJcblxyXG5zZXRUYXNrQ291bnRlcigpO1xyXG5cclxuY29uc3QgcmVtb3ZlVG9kbyA9IGUgPT4ge1xyXG5cdGUuc3RvcFByb3BhZ2F0aW9uKClcclxuXHRjb25zdCBpZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9kby1pZCcpXHJcbiBjb25zdCB0b2RvRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpXHJcblxyXG5cdGZldGNoKCcuLi9hcHAvaW5jbHVkZXMvcmVtb3ZlX3RvZG8uaW5jLnBocCcsIHtcclxuXHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHR9LFxyXG5cdFx0Ym9keTogJ2lkPScgKyBpZCxcclxuXHR9KVxyXG5cdFx0LnRoZW4odG9kb0Rpdi5yZW1vdmUoKSlcclxuXHRcdC5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1d5c3TEhXBpxYIgYsWCxIVkOicsIGVycm9yKTtcclxuXHRcdH0pO1xyXG5cdHNldFRhc2tDb3VudGVyKCk7XHJcbn07XHJcblxyXG5jb25zdCBzZXRFZGl0VGl0bGVFcnJvciA9ICgpID0+IHtcclxuXHRlZGl0VG9kb0lucHV0LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcblx0Y29uc3QgZXJyb3JQYXJhZ3JhcGggPSBlZGl0VG9kb0lucHV0Lm5leHRFbGVtZW50U2libGluZztcclxuXHRlcnJvclBhcmFncmFwaC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxufTtcclxuXHJcbmNvbnN0IGNsZWFyRWRpdFRpdGxlRXJyb3IgPSAoKSA9PiB7IFxyXG5cdGVkaXRUb2RvSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuXHRjb25zdCBlcnJvclBhcmFncmFwaCA9IGVkaXRUb2RvSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cdGVycm9yUGFyYWdyYXBoLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG4gfVxyXG5cclxuXHJcbmNvbnN0IHVwZGF0ZVRvZG8gPSAodG9kb0lkLCB0aXRsZSA9IG51bGwsIGRlc2NyaXB0aW9uID0gbnVsbCkgPT4ge1xyXG5cclxuXHRpZiAodGl0bGUgPT09ICcnKSB7XHJcblx0XHRzZXRFZGl0VGl0bGVFcnJvcigpO1xyXG5yZXR1cm5cclxuXHR9IGVsc2Uge1xyXG5cdFx0Y29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xyXG5cdFx0cGFyYW1zLmFwcGVuZCgnaWQnLCB0b2RvSWQpO1xyXG5cdFx0cGFyYW1zLmFwcGVuZCgndGl0bGUnLCB0aXRsZSk7XHJcblx0XHRwYXJhbXMuYXBwZW5kKCdkZXNjcmlwdGlvbicsIGRlc2NyaXB0aW9uKTtcclxuXHJcblx0XHRmZXRjaCgnLi4vYXBwL2luY2x1ZGVzL2VkaXRfdG9kby5pbmMucGhwJywge1xyXG5cdFx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuXHRcdFx0fSxcclxuXHRcdFx0Ym9keTogcGFyYW1zLFxyXG5cdFx0fSlcclxuXHRcdFx0LnRoZW4oKCkgPT4gbG9jYXRpb24ucmVsb2FkKCkpXHJcblx0XHRcdC5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcignV3lzdMSFcGnFgiBixYLEhWQ6JywgZXJyb3IpO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBzZXRBZGRUb2RvVGl0bGVFcnJvciA9ICgpID0+IHtcclxuXHRhZGRUb2RvVGl0bGUuY2xhc3NMaXN0LmFkZCgnZXJyb3InKVxyXG5cdGNvbnN0IGVycm9yUGFyYWdyYXBoID0gYWRkVG9kb1RpdGxlLm5leHRFbGVtZW50U2libGluZ1xyXG5lcnJvclBhcmFncmFwaC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKVxyXG59XHJcblxyXG5jb25zdCBjbGVhckFkZFRvZG9FcnJvciA9ICgpID0+IHsgXHJcblx0YWRkVG9kb1RpdGxlLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJylcclxuXHRjb25zdCBlcnJvclBhcmFncmFwaCA9IGFkZFRvZG9UaXRsZS5uZXh0RWxlbWVudFNpYmxpbmdcclxuZXJyb3JQYXJhZ3JhcGguY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcclxuIH1cclxuXHJcblxyXG5jb25zdCB0b2dnbGVDb21wbGV0ZVRvZG8gPSBlID0+IHtcclxuXHRjb25zdCBpZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9kby1pZCcpO1xyXG5cclxuY29uc3QgdG9kb0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxyXG5cclxuaWYgKHRvZG9EaXYuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b2RvLWRvbmUnKSkge1xyXG5cdHRvZG9EaXYuY2xhc3NMaXN0LnJlbW92ZSgndG9kby1kb25lJylcclxufSBlbHNlIHtcclxuXHR0b2RvRGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8tZG9uZScpXHJcbn1cclxuXHJcblxyXG5cdGZldGNoKCcuLi9hcHAvaW5jbHVkZXMvY29tcGxldGVfdG9kby5pbmMucGhwJywge1xyXG5cdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuXHRcdH0sXHJcblx0XHRib2R5OiAnaWQ9JyArIGlkLFxyXG5cdH0pLmNhdGNoKGVycm9yID0+IHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoJ1d5c3TEhXBpxYIgYsWCxIVkOicsIGVycm9yKTtcclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IHNldEVkaXRJbnB1dHMgPSBlID0+IHtcclxuXHR0b2RvSWQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taWQnKTtcclxuXHJcblx0Y29uc3QgdGl0bGVQYXJhZ3JhcGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAudG9kby10aXRsZVtkYXRhLXRvZG8taWQ9XCIke3RvZG9JZH1cIl1gKTtcclxuXHRjb25zdCBkZXNjcmlwdGlvblBhcmFncmFwaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50b2RvLWRlc2NyaXB0aW9uW2RhdGEtdG9kby1pZD1cIiR7dG9kb0lkfVwiXWApO1xyXG5cclxuXHRlZGl0VG9kb0lucHV0LnZhbHVlID0gdGl0bGVQYXJhZ3JhcGgudGV4dENvbnRlbnQ7XHJcblx0ZWRpdFRvZG9EZXNjcmlwdGlvbi52YWx1ZSA9IGRlc2NyaXB0aW9uUGFyYWdyYXBoLnRleHRDb250ZW50O1xyXG59O1xyXG5cclxuZWRpdFRvZG9Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcblx0ZWRpdFRvZG9JbnB1dC52YWx1ZSA9ICcnO1xyXG5cdGVkaXRUb2RvRGVzY3JpcHRpb24udmFsdWUgPSAnJztcclxuXHR0b2RvSWQgPSBudWxsO1xyXG5cdGNsZWFyRWRpdFRpdGxlRXJyb3IoKVxyXG59KTtcclxuXHJcbmFkZFRvZG9Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcblx0YWRkVG9kb1RpdGxlLnZhbHVlID0gJyc7XHJcblx0YWRkVG9kb0Rlc2NyaXB0aW9uLnZhbHVlID0gJyc7XHJcblx0Y2xlYXJBZGRUb2RvRXJyb3IoKVxyXG59KTtcclxuXHJcblxyXG5hZGRUb2RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcblx0aWYgKGFkZFRvZG9UaXRsZS52YWx1ZSA9PT0gJycpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdFx0c2V0QWRkVG9kb1RpdGxlRXJyb3IoKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm5cclxuXHR9XHJcbn0gKVxyXG5cclxuYWRkVG9kb1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2xlYXJBZGRUb2RvRXJyb3IpXHJcblxyXG5yZW1vdmVUb2RvQnRucy5mb3JFYWNoKGJ0biA9PiB7XHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlVG9kbyk7XHJcbn0pO1xyXG5lZGl0VG9kb0J0bnMuZm9yRWFjaChidG4gPT4ge1xyXG5cdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNldEVkaXRJbnB1dHMpO1xyXG59KTtcclxuY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcclxuXHRjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUNvbXBsZXRlVG9kbyk7XHJcbn0pO1xyXG5cclxuZWRpdFRvZG9JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGNsZWFyRWRpdFRpdGxlRXJyb3IpXHJcblxyXG5zYXZlQ2hhbmdlc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRpZiAodG9kb0lkKSB7XHJcblx0XHRjb25zdCB0aXRsZSA9IGVkaXRUb2RvSW5wdXQudmFsdWU7XHJcblx0XHRjb25zdCBkZXNjcmlwdGlvbiA9IGVkaXRUb2RvRGVzY3JpcHRpb24udmFsdWU7XHJcblx0XHR1cGRhdGVUb2RvKHRvZG9JZCwgdGl0bGUsIGRlc2NyaXB0aW9uKTtcclxuXHR9XHJcbn0pO1xyXG4iXX0=
