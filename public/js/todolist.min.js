"use strict";var removeTodoBtns=document.querySelectorAll(".remove-todo-btn"),editTodoBtns=document.querySelectorAll(".edit-todo-btn"),saveChangesBtn=document.querySelector(".save-changes"),editTodoInput=document.querySelector(".edit-todo-input"),editTodoDescription=document.querySelector(".edit-todo-description"),checkboxes=document.querySelectorAll(".todo-checkbox"),editTodoModal=document.getElementById("editTodoModal"),addTodoModal=document.getElementById("addTodoModal"),addTodoTitle=document.querySelector(".add-todo-title"),addTodoDescription=document.querySelector(".add-todo-description"),addTodoBtn=document.querySelector(".add-todo-btn"),searchInput=document.querySelector(".search-input"),todoItems=document.querySelectorAll(".todo"),dashboardNavBtn=document.querySelector(".dashboard-nav-btn"),backShadow=document.querySelector(".back-shadow"),dashboardNavBox=document.querySelector(".dashboard-nav-box"),myTasksHeader=document.querySelector(".my-tasks-header"),searchBox=document.querySelector(".search-box"),todoId=null,dashboardNavToggle=function(){backShadow.classList.contains("active")&&dashboardNavBox.classList.contains("active")?(backShadow.classList.remove("active"),dashboardNavBox.classList.remove("active")):(backShadow.classList.add("active"),dashboardNavBox.classList.add("active"))},setTaskCounter=function(){var e=document.querySelector(".task-counter"),o=todoItems.length;2<=o?(e.innerHTML="Masz ".concat(todoItems.length," zadania do zrobienia"),myTasksHeader.classList.remove("d-none"),searchBox.classList.remove("d-none")):1===o?(e.innerHTML="Masz jedno zadanie do zrobienia",myTasksHeader.classList.remove("d-none"),searchBox.classList.remove("d-none")):e.innerHTML="Nie masz żadnych zadań do zrobienia"},searchTodoHandler=(setTaskCounter(),function(){var o=searchInput.value.toLowerCase();todoItems.forEach(function(e){e.querySelector(".todo-title").textContent.toLocaleLowerCase().includes(o)?(e.classList.add("d-flex"),e.classList.remove("d-none")):(e.classList.add("d-none"),e.classList.remove("d-flex"))})}),removeTodo=function(e){e.stopPropagation();var e=e.currentTarget.getAttribute("data-todo-id"),o=document.getElementById(e),t=todoItems.length;fetch("../app/includes/remove_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).then(o.remove()).catch(function(e){console.error("Wystąpił błąd:",e)}),setTaskCounter(),t<=1&&(myTasksHeader.classList.add("d-none"),searchBox.classList.add("d-none"))},setEditTitleError=function(){editTodoInput.classList.add("error"),editTodoInput.nextElementSibling.classList.remove("d-none")},clearEditTitleError=function(){editTodoInput.classList.remove("error"),editTodoInput.nextElementSibling.classList.add("d-none")},updateTodo=function(e){var o,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;""===t?setEditTitleError():((o=new URLSearchParams).append("id",e),o.append("title",t),o.append("description",d),fetch("../app/includes/edit_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o}).then(function(){return location.reload()}).catch(function(e){console.error("Wystąpił błąd:",e)}))},setAddTodoTitleError=function(){addTodoTitle.classList.add("error"),addTodoTitle.nextElementSibling.classList.remove("d-none")},clearAddTodoError=function(){addTodoTitle.classList.remove("error"),addTodoTitle.nextElementSibling.classList.add("d-none")},toggleCompleteTodo=function(e){var e=e.currentTarget.getAttribute("data-todo-id"),o=document.getElementById(e);o.classList.contains("todo-done")?o.classList.remove("todo-done"):o.classList.add("todo-done"),fetch("../app/includes/complete_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).catch(function(e){console.error("Wystąpił błąd:",e)})},setEditInputs=function(e){todoId=e.currentTarget.getAttribute("data-todo-id");var e=document.querySelector('.todo-title[data-todo-id="'.concat(todoId,'"]')),o=document.querySelector('.todo-description[data-todo-id="'.concat(todoId,'"]'));editTodoInput.value=e.textContent,editTodoDescription.value=o.textContent};editTodoModal.addEventListener("hidden.bs.modal",function(){editTodoInput.value="",editTodoDescription.value="",todoId=null,clearEditTitleError()}),addTodoModal.addEventListener("hidden.bs.modal",function(){addTodoTitle.value="",addTodoDescription.value="",clearAddTodoError()}),addTodoBtn.addEventListener("click",function(e){""===addTodoTitle.value&&(e.preventDefault(),setAddTodoTitleError())}),dashboardNavBtn.addEventListener("click",dashboardNavToggle),backShadow.addEventListener("click",dashboardNavToggle),searchInput.addEventListener("input",searchTodoHandler),addTodoTitle.addEventListener("input",clearAddTodoError),removeTodoBtns.forEach(function(e){e.addEventListener("click",removeTodo)}),editTodoBtns.forEach(function(e){e.addEventListener("click",setEditInputs)}),checkboxes.forEach(function(e){e.addEventListener("click",toggleCompleteTodo)}),editTodoInput.addEventListener("input",clearEditTitleError),saveChangesBtn.addEventListener("click",function(){var e,o;todoId&&(e=editTodoInput.value,o=editTodoDescription.value,updateTodo(todoId,e,o))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG9saXN0LmpzIl0sIm5hbWVzIjpbInJlbW92ZVRvZG9CdG5zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWRpdFRvZG9CdG5zIiwic2F2ZUNoYW5nZXNCdG4iLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFRvZG9JbnB1dCIsImVkaXRUb2RvRGVzY3JpcHRpb24iLCJjaGVja2JveGVzIiwiZWRpdFRvZG9Nb2RhbCIsImdldEVsZW1lbnRCeUlkIiwiYWRkVG9kb01vZGFsIiwiYWRkVG9kb1RpdGxlIiwiYWRkVG9kb0Rlc2NyaXB0aW9uIiwiYWRkVG9kb0J0biIsInNlYXJjaElucHV0IiwidG9kb0l0ZW1zIiwiZGFzaGJvYXJkTmF2QnRuIiwiYmFja1NoYWRvdyIsImRhc2hib2FyZE5hdkJveCIsInNlYXJjaEJveCIsImRhc2hib2FyZE5hdlRvZ2dsZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwidGFza0NvdW50ZXIiLCJ0YXNrc0Ftb3VudCIsImxlbmd0aCIsImlubmVySFRNTCIsIm15VGFza3NIZWFkZXIiLCJzZXRUYXNrQ291bnRlciIsInRvZG8iLCJ0b2RvVGl0bGUiLCJ2YWx1ZSIsInRvTG93ZXJDYXNlIiwidGV4dENvbnRlbnQiLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsImluY2x1ZGVzIiwic2VhcmNoVmFsdWUiLCJyZW1vdmVUb2RvIiwiY3VycmVudFRhcmdldCIsImdldEF0dHJpYnV0ZSIsInRvZG9EaXYiLCJmZXRjaCIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJib2R5IiwiaWQiLCJ0aGVuIiwiY29uc29sZSIsIm1ldGhvZCIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJlcnJvclBhcmFncmFwaCIsImVycm9yIiwiY2xlYXJFZGl0VGl0bGVFcnJvciIsInRpdGxlIiwic2V0RWRpdFRpdGxlRXJyb3IiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJwYXJhbXMiLCJhcHBlbmQiLCJkZXNjcmlwdGlvbiIsInVwZGF0ZVRvZG8iLCJ0b2RvSWQiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0b2dnbGVDb21wbGV0ZVRvZG8iLCJzZXRBZGRUb2RvVGl0bGVFcnJvciIsImNsZWFyQWRkVG9kb0Vycm9yIiwic2V0RWRpdElucHV0cyIsInRpdGxlUGFyYWdyYXBoIiwiZGVzY3JpcHRpb25QYXJhZ3JhcGgiLCJhZGRFdmVudExpc3RlbmVyIiwiY29uY2F0Iiwic2VhcmNoVG9kb0hhbmRsZXIiLCJwcmV2ZW50RGVmYXVsdCIsImZvckVhY2giLCJidG4iLCJjaGVja2JveCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsZUFBaUJDLFNBQVNDLGlCQUFpQixrQkFBa0IsRUFDN0RDLGFBQWVGLFNBQVNDLGlCQUFpQixnQkFBZ0IsRUFEekRGLGVBQWlCQyxTQUFTQyxjQUFnQixlQUFDLEVBQzNDQyxjQUFlRixTQUFTQyxjQUFpQixrQkFBaUIsRUFDMURFLG9CQUFpQkgsU0FBU0ksY0FBYyx3QkFBZ0IsRUFDeERDLFdBQWFMLFNBQVdDLGlCQUFlLGdCQUFrQixFQUN6REssY0FBQUEsU0FBc0JOLGVBQVNJLGVBQWMsRUFDN0NHLGFBQWFQLFNBQVNDLGVBQWlCLGNBQWdCLEVBQ3ZETyxhQUFnQlIsU0FBU1MsY0FBZSxpQkFBZ0IsRUFDeERDLG1CQUF1QlYsU0FBQ1MsY0FBZSx1QkFBZSxFQUN0REUsV0FBZVgsU0FBU0ksY0FBYyxlQUFBLEVBQ3RDUSxZQUFBQSxTQUFxQlosY0FBU0ksZUFBYyxFQUM1Q1MsVUFBYWIsU0FBU0ksaUJBQWMsT0FBQSxFQUNwQ1UsZ0JBQWNkLFNBQVNJLGNBQWMsb0JBQWdCLEVBQ3JEVyxXQUFZZixTQUFTQyxjQUFpQixjQUFRLEVBQzlDZSxnQkFBa0JoQixTQUFTSSxjQUFjLG9CQUFxQixFQUM5RGEsY0FBYWpCLFNBQVNJLGNBQWMsa0JBQWUsRUFDbkRjLFVBQUFBLFNBQWtCbEIsY0FBU0ksYUFBYyxFQUV6Q2UsT0FBUyxLQUlUQyxtQkFBcUIsV0FDMUJILFdBQWNJLFVBQVVDLFNBQVMsUUFBQyxHQUFTSixnQkFBbUJHLFVBQVVDLFNBQVMsUUFBQyxHQUNqRkwsV0FBQUEsVUFBV0ksT0FBVUUsUUFBTyxFQUM1QkwsZ0JBQUFBLFVBQWdCRyxPQUFVRSxRQUFPLElBRWpDTixXQUFBQSxVQUFXSSxJQUFVRyxRQUFJLEVBQ3pCTixnQkFBQUEsVUFBZ0JHLElBQVVHLFFBQUksRUFFaEMsRUFHT0MsZUFBY3pCLFdBQXBCLElBRU0wQixFQUFjWCxTQUFVWSxjQUFNLGVBQUEsRUFHbkNGLEVBQVlHLFVBQVNELE9BRVhOLEdBQVZGLEdBQ0RNLEVBQVdDLFVBQUFBLFFBQUFBLE9BQW1CWCxVQUFBWSxPQUFBLHVCQUFBLEVBRjdCRSxjQUdZRCxVQUFTTCxPQUFBLFFBQUEsRUFGckJKLFVBR0FVLFVBQWNSLE9BQVVFLFFBQU8sR0FDWEEsSUFBcEJKLEdBQ0RNLEVBQU9HLFVBQUEsa0NBRk5DLGNBR1lELFVBQVNMLE9BQUEsUUFBQSxFQUN0QkosVUFBQUUsVUFBQUUsT0FBQSxRQUFBLEdBR0RPLEVBQWNGLFVBQUUscUNBRmhCLEVBV0dHLG1CQVRIRCxlQU1RRSxFQUdjLFdBTnJCLElBT0VELEVBQWVSLFlBQU9VLE1BQVNDLFlBQUEsRUFMakNuQixVQU9PTSxRQUFBQSxTQUFBQSxHQUNTVSxFQUFDUixjQUFnQixhQUFBLEVBQUFZLFlBQUFDLGtCQUFBLEVBRS9CQyxTQUFBQyxDQUFBLEdBQ0ZQLEVBQUFWLFVBQUFHLElBQUEsUUFBQSxFQUVETyxFQUFNUSxVQUFhaEIsT0FBQSxRQUFiZ0IsSUFFTFIsRUFBUVYsVUFBS21CLElBQUFBLFFBQWNDLEVBQzNCVixFQUFNVyxVQUFVMUMsT0FBU1MsUUFBQUEsRUFOekIsQ0FTQWtDLENBUkQsR0FXR0osV0FBQSxTQUFBSyxHQVJGQSxFQUFFQyxnQkFTQSxFQVJGLElBU0NDLEVBQU1GLEVBQUFKLGNBQVFPLGFBQUFBLGNBQUFBLEVBRWJDLEVBQVloRCxTQUFTUyxlQUNmc0MsQ0FBQSxFQUNORSxFQUFjbEMsVUFBQVksT0FUaEJnQixNQVdBYixzQ0FBZ0IsQ0FFaEJvQixPQUFJeEIsT0FYSHlCLFFBWUF0QixDQVhDdUIsZUFZUy9CLG1DQUNYLEVBQ0F5QixLQUFBLE1BQUFDLENBRUQsQ0FBQSxFQUNDMUMsS0FBQUEsRUFBY2dCLE9BQUFBLENBQUFBLEVBQVMsTUFDakJnQyxTQUFBQSxHQUNOQSxRQUFBQSxNQUFlaEMsaUJBQWlCaUMsQ0FBQSxDQUNoQyxDQUFBLEVBRUR4QixlQUFNeUIsRUFFTDdCLEdBQW9CLElBQ3BCMkIsY0FBY2hDLFVBQVVHLElBQUksUUFBQyxFQUM3QkwsVUFBQUUsVUFBQUcsSUFBQSxRQUFBLEVBWkQsRUFlS2dDLGtCQUFjLFdBWmxCbkQsY0FhQ29ELFVBQW1CakMsSUFBQSxPQUFBLEVBQ25CbkIsY0FBQXFELG1CQUNNckMsVUFBQUUsT0FBQSxRQUFBLENBWlIsRUFlRW9DLG9CQUF1QkgsV0FaeEJuRCxjQWFRdUQsVUFBT3JDLE9BQWEsT0FBRXNDLEVBRXZCeEQsY0FBQXFELG1CQUNHckMsVUFBTUcsSUFBQSxRQUFBLENBYmpCLEVBZ0JHc0MsV0FBQyxTQUFBQyxHQUFBLElBS0FkLEVBTEFPLEVBQUEsRUFBQVEsVUFBQXJDLFFBQUFzQyxLQUFBQSxJQUFBRCxVQUFBLEdBQUFBLFVBQUEsR0FBQSxLQUFBSCxFQUFBLEVBQUFHLFVBQUFyQyxRQUFBc0MsS0FBQUEsSUFBQUQsVUFBQSxHQUFBQSxVQUFBLEdBQUEsS0FDS0wsS0FkSkgsRUFDSEMsa0JBZU8sSUFFTFIsRUFBUUssSUFBTVksaUJBQ2JOLE9BQUEsS0FBQUcsQ0FBQSxFQUNKSixFQUFBQyxPQUFBLFFBQUFKLENBQUEsRUFDQUcsRUFBQUMsT0FBQSxjQUFBQyxDQUFBLEVBR0FsRCxNQUFBQSxvQ0FBbUMsQ0FDbkN1QyxPQUFNRyxPQUNOQSxRQUFBQSxDQUNBRCxlQUFBLG1DQUVELEVBQ0N6QyxLQUFBQSxDQUNBLENBQUEsRUFDQTBDLEtBQUFBLFdBQUFBLE9BQUFBLFNBQWVoQyxPQUFjLENBQUEsQ0FBQSxFQUFBLE1BQzdCLFNBQUFpQyxHQUVLYSxRQUFBQSxNQUFBQSxpQkFBQUEsQ0FBQUEsQ0FDTCxDQUFBLEVBZkQsRUFxQkVDLHFCQUFNLFdBbEJQekQsYUFtQlNVLFVBQVVHLElBQUksT0FBQSxFQUN2QmIsYUFBQStDLG1CQUVNckMsVUFBQUUsT0FBQSxRQUFBLENBbkJQLEVBc0JHOEMsa0JBQWdCLFdBbkJsQjFELGFBb0JFVSxVQUFBRSxPQUFBLE9BQUEsRUFDYXdCLGFBQUFBLG1CQUNOMUIsVUFBQWlDLElBQUssUUFBSSxDQW5CbkIsRUFzQkNhLG1CQUFBLFNBQUF2QixHQUVELElBQU0wQixFQUFBQSxFQUFBQSxjQUFnQjdCLGFBQWhCNkIsY0FBcUIsRUFHcEJDLEVBQUFBLFNBQWlCdkUsZUFBU0ksQ0FBQUEsRUFHaENDLEVBQUFBLFVBQW1CaUIsU0FBR2lELFdBQWVwQyxFQUNyQzdCLEVBQUFBLFVBQUFBLE9BQXlCLFdBQUdrRSxFQUc3QmhFLEVBQUFBLFVBQWNpRSxJQUFBQSxXQUFpQixFQXJCOUI5QixNQXdCQW9CLHdDQUFhLENBQ2JSLE9BQUFBLE9BQ0NKLFFBQUEsQ0FFRnpDLGVBQWErRCxtQ0FDWjlELEVBQ0FDLEtBQUFBLE1BQUFBLENBeEJBLENBeUJBeUQsRUFBQUEsTUFBQUEsU0FBQUEsR0FDQ3BCLFFBQUFLLE1BQUEsaUJBQUFBLENBQUEsQ0FFRnpDLENBQUFBLENBekJBLEVBNEJFdUQsY0FBQUEsU0FBQUEsR0F6QkRMLE9BMEJPbkIsRUFBQUosY0FBQUMsYUFBQSxjQUFBLEVBeEJQLElBMEJBOEIsRUFBQXZFLFNBQUFJLGNBQUEsNkJBQUFzRSxPQUFBWCxPQUFBLElBQUEsQ0FBQSxFQUNDUyxFQUFBeEUsU0FBQUksY0FBQSxtQ0FBQXNFLE9BQUFYLE9BQUEsSUFBQSxDQUFBLEVBSUY5QyxjQUFXd0QsTUFBQUEsRUFBMEJyRCxZQUVyQ04sb0JBQVkyRCxNQUFpQkQsRUFBU0csV0FFdENoRSxFQTVCQUgsY0ErQktpRSxpQkFBd0Isa0JBQWEsV0FDekNwRSxjQUFDNEIsTUFBQSxHQUNGL0Isb0JBQXFCK0IsTUFBQSxHQTlCcEI4QixPQStCSVUsS0FDSmxCLG9CQUFDLENBQ0ZoRCxDQUFBQSxFQUVBRyxhQUFFK0QsaUJBQUEsa0JBQUEsV0FFRnBFLGFBQWNvRSxNQUFBQSxHQUVkdEUsbUJBQWVzRSxNQUFBQSxHQWhDZEosa0JBaUNZLENBaENiLENBQUMsRUFFRHhELFdBaUNFaUQsaUJBQXdCLFFBQUVELFNBQUFBLEdBQzNCLEtBQUFsRCxhQUFBc0IsUUFDQ1csRUFBQWdDLGVBQUEsRUFoQ0FSLHFCQUFxQixFQUl2QixDQUFDLEVBRURwRCxnQkFBZ0J5RCxpQkFBaUIsUUFBU3JELGtCQUFrQixFQUU1REgsV0FBV3dELGlCQUFpQixRQUFTckQsa0JBQWtCLEVBRXZETixZQUFZMkQsaUJBQWlCLFFBQVNFLGlCQUFpQixFQUV2RGhFLGFBQWE4RCxpQkFBaUIsUUFBU0osaUJBQWlCLEVBRXhEdEUsZUFBZThFLFFBQVEsU0FBQUMsR0FDdEJBLEVBQUlMLGlCQUFpQixRQUFTbEMsVUFBVSxDQUN6QyxDQUFDLEVBQ0RyQyxhQUFhMkUsUUFBUSxTQUFBQyxHQUNwQkEsRUFBSUwsaUJBQWlCLFFBQVNILGFBQWEsQ0FDNUMsQ0FBQyxFQUNEL0QsV0FBV3NFLFFBQVEsU0FBQUUsR0FDbEJBLEVBQVNOLGlCQUFpQixRQUFTTixrQkFBa0IsQ0FDdEQsQ0FBQyxFQUVEOUQsY0FBY29FLGlCQUFpQixRQUFTbEIsbUJBQW1CLEVBRTNEcEQsZUFBZXNFLGlCQUFpQixRQUFTLFdBQ3hDLElBQ09qQixFQUNBSyxFQUZIRSxTQUNHUCxFQUFRbkQsY0FBYzRCLE1BQ3RCNEIsRUFBY3ZELG9CQUFvQjJCLE1BQ3hDNkIsV0FBV0MsT0FBUVAsRUFBT0ssQ0FBVyxFQUV2QyxDQUFDIiwiZmlsZSI6InRvZG9saXN0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlbW92ZVRvZG9CdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlbW92ZS10b2RvLWJ0bicpO1xyXG5jb25zdCBlZGl0VG9kb0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC10b2RvLWJ0bicpO1xyXG5jb25zdCBzYXZlQ2hhbmdlc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYXZlLWNoYW5nZXMnKTtcclxuY29uc3QgZWRpdFRvZG9JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LXRvZG8taW5wdXQnKTtcclxuY29uc3QgZWRpdFRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LXRvZG8tZGVzY3JpcHRpb24nKTtcclxuY29uc3QgY2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2RvLWNoZWNrYm94Jyk7XHJcbmNvbnN0IGVkaXRUb2RvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdFRvZG9Nb2RhbCcpO1xyXG5jb25zdCBhZGRUb2RvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkVG9kb01vZGFsJyk7XHJcbmNvbnN0IGFkZFRvZG9UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kby10aXRsZScpO1xyXG5jb25zdCBhZGRUb2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8tZGVzY3JpcHRpb24nKTtcclxuY29uc3QgYWRkVG9kb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kby1idG4nKTtcclxuY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWlucHV0Jyk7XHJcbmNvbnN0IHRvZG9JdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2RvJyk7XHJcbmNvbnN0IGRhc2hib2FyZE5hdkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXNoYm9hcmQtbmF2LWJ0bicpO1xyXG5jb25zdCBiYWNrU2hhZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhY2stc2hhZG93Jyk7XHJcbmNvbnN0IGRhc2hib2FyZE5hdkJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXNoYm9hcmQtbmF2LWJveCcpO1xyXG5jb25zdCBteVRhc2tzSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm15LXRhc2tzLWhlYWRlcicpO1xyXG5jb25zdCBzZWFyY2hCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWJveCcpO1xyXG5cclxubGV0IHRvZG9JZCA9IG51bGw7XHJcblxyXG5jb25zdCBkYXNoYm9hcmROYXZUb2dnbGUgPSAoKSA9PiB7XHJcblx0aWYgKGJhY2tTaGFkb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSAmJiBkYXNoYm9hcmROYXZCb3guY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG5cdFx0YmFja1NoYWRvdy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHRcdGRhc2hib2FyZE5hdkJveC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0YmFja1NoYWRvdy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdGRhc2hib2FyZE5hdkJveC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBzZXRUYXNrQ291bnRlciA9ICgpID0+IHtcclxuXHRjb25zdCB0YXNrQ291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWNvdW50ZXInKTtcclxuXHJcblx0Y29uc3QgdGFza3NBbW91bnQgPSB0b2RvSXRlbXMubGVuZ3RoO1xyXG5cclxuXHRpZiAodGFza3NBbW91bnQgPj0gMikge1xyXG5cdFx0dGFza0NvdW50ZXIuaW5uZXJIVE1MID0gYE1hc3ogJHt0b2RvSXRlbXMubGVuZ3RofSB6YWRhbmlhIGRvIHpyb2JpZW5pYWA7XHJcblx0XHRteVRhc2tzSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXHJcblx0XHRzZWFyY2hCb3guY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcclxuXHR9IGVsc2UgaWYgKHRhc2tzQW1vdW50ID09PSAxKSB7XHJcblx0XHR0YXNrQ291bnRlci5pbm5lckhUTUwgPSBgTWFzeiBqZWRubyB6YWRhbmllIGRvIHpyb2JpZW5pYWA7XHJcblx0XHRteVRhc2tzSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXHJcblx0XHRzZWFyY2hCb3guY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcclxuXHR9IGVsc2Uge1xyXG5cdFx0dGFza0NvdW50ZXIuaW5uZXJIVE1MID0gYE5pZSBtYXN6IMW8YWRueWNoIHphZGHFhCBkbyB6cm9iaWVuaWFgO1xyXG5cdH1cclxufTtcclxuXHJcbnNldFRhc2tDb3VudGVyKCk7XHJcblxyXG5jb25zdCBzZWFyY2hUb2RvSGFuZGxlciA9ICgpID0+IHtcclxuXHRjb25zdCBzZWFyY2hWYWx1ZSA9IHNlYXJjaElucHV0LnZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdHRvZG9JdGVtcy5mb3JFYWNoKHRvZG8gPT4ge1xyXG5cdFx0Y29uc3QgdG9kb1RpdGxlID0gdG9kby5xdWVyeVNlbGVjdG9yKCcudG9kby10aXRsZScpLnRleHRDb250ZW50LnRvTG9jYWxlTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0aWYgKHRvZG9UaXRsZS5pbmNsdWRlcyhzZWFyY2hWYWx1ZSkpIHtcclxuXHRcdFx0dG9kby5jbGFzc0xpc3QuYWRkKCdkLWZsZXgnKTtcclxuXHRcdFx0dG9kby5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRvZG8uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcblx0XHRcdHRvZG8uY2xhc3NMaXN0LnJlbW92ZSgnZC1mbGV4Jyk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCByZW1vdmVUb2RvID0gZSA9PiB7XHJcblx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRjb25zdCBpZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9kby1pZCcpO1xyXG5cdGNvbnN0IHRvZG9EaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcblx0Y29uc3QgdGFza3NBbW91bnQgPSB0b2RvSXRlbXMubGVuZ3RoO1xyXG5cclxuXHRmZXRjaCgnLi4vYXBwL2luY2x1ZGVzL3JlbW92ZV90b2RvLmluYy5waHAnLCB7XHJcblx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxyXG5cdFx0fSxcclxuXHRcdGJvZHk6ICdpZD0nICsgaWQsXHJcblx0fSlcclxuXHRcdC50aGVuKHRvZG9EaXYucmVtb3ZlKCkpXHJcblx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdXeXN0xIVwacWCIGLFgsSFZDonLCBlcnJvcik7XHJcblx0XHR9KTtcclxuXHRzZXRUYXNrQ291bnRlcigpO1xyXG5cclxuXHRpZiAodGFza3NBbW91bnQgPD0gMSkge1xyXG5cdFx0bXlUYXNrc0hlYWRlci5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKVxyXG5cdFx0c2VhcmNoQm94LmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXHJcblx0fVxyXG59O1xyXG5cclxuY29uc3Qgc2V0RWRpdFRpdGxlRXJyb3IgPSAoKSA9PiB7XHJcblx0ZWRpdFRvZG9JbnB1dC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG5cdGNvbnN0IGVycm9yUGFyYWdyYXBoID0gZWRpdFRvZG9JbnB1dC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblx0ZXJyb3JQYXJhZ3JhcGguY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbn07XHJcblxyXG5jb25zdCBjbGVhckVkaXRUaXRsZUVycm9yID0gKCkgPT4ge1xyXG5cdGVkaXRUb2RvSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuXHRjb25zdCBlcnJvclBhcmFncmFwaCA9IGVkaXRUb2RvSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cdGVycm9yUGFyYWdyYXBoLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG59O1xyXG5cclxuY29uc3QgdXBkYXRlVG9kbyA9ICh0b2RvSWQsIHRpdGxlID0gbnVsbCwgZGVzY3JpcHRpb24gPSBudWxsKSA9PiB7XHJcblx0aWYgKHRpdGxlID09PSAnJykge1xyXG5cdFx0c2V0RWRpdFRpdGxlRXJyb3IoKTtcclxuXHRcdHJldHVybjtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Y29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xyXG5cdFx0cGFyYW1zLmFwcGVuZCgnaWQnLCB0b2RvSWQpO1xyXG5cdFx0cGFyYW1zLmFwcGVuZCgndGl0bGUnLCB0aXRsZSk7XHJcblx0XHRwYXJhbXMuYXBwZW5kKCdkZXNjcmlwdGlvbicsIGRlc2NyaXB0aW9uKTtcclxuXHJcblx0XHRmZXRjaCgnLi4vYXBwL2luY2x1ZGVzL2VkaXRfdG9kby5pbmMucGhwJywge1xyXG5cdFx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuXHRcdFx0fSxcclxuXHRcdFx0Ym9keTogcGFyYW1zLFxyXG5cdFx0fSlcclxuXHRcdFx0LnRoZW4oKCkgPT4gbG9jYXRpb24ucmVsb2FkKCkpXHJcblx0XHRcdC5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcignV3lzdMSFcGnFgiBixYLEhWQ6JywgZXJyb3IpO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBzZXRBZGRUb2RvVGl0bGVFcnJvciA9ICgpID0+IHtcclxuXHRhZGRUb2RvVGl0bGUuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuXHRjb25zdCBlcnJvclBhcmFncmFwaCA9IGFkZFRvZG9UaXRsZS5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblx0ZXJyb3JQYXJhZ3JhcGguY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbn07XHJcblxyXG5jb25zdCBjbGVhckFkZFRvZG9FcnJvciA9ICgpID0+IHtcclxuXHRhZGRUb2RvVGl0bGUuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuXHRjb25zdCBlcnJvclBhcmFncmFwaCA9IGFkZFRvZG9UaXRsZS5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblx0ZXJyb3JQYXJhZ3JhcGguY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbn07XHJcblxyXG5jb25zdCB0b2dnbGVDb21wbGV0ZVRvZG8gPSBlID0+IHtcclxuXHRjb25zdCBpZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9kby1pZCcpO1xyXG5cclxuXHRjb25zdCB0b2RvRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cclxuXHRpZiAodG9kb0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZG8tZG9uZScpKSB7XHJcblx0XHR0b2RvRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3RvZG8tZG9uZScpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR0b2RvRGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8tZG9uZScpO1xyXG5cdH1cclxuXHJcblx0ZmV0Y2goJy4uL2FwcC9pbmNsdWRlcy9jb21wbGV0ZV90b2RvLmluYy5waHAnLCB7XHJcblx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxyXG5cdFx0fSxcclxuXHRcdGJvZHk6ICdpZD0nICsgaWQsXHJcblx0fSkuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0Y29uc29sZS5lcnJvcignV3lzdMSFcGnFgiBixYLEhWQ6JywgZXJyb3IpO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3Qgc2V0RWRpdElucHV0cyA9IGUgPT4ge1xyXG5cdHRvZG9JZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9kby1pZCcpO1xyXG5cclxuXHRjb25zdCB0aXRsZVBhcmFncmFwaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50b2RvLXRpdGxlW2RhdGEtdG9kby1pZD1cIiR7dG9kb0lkfVwiXWApO1xyXG5cdGNvbnN0IGRlc2NyaXB0aW9uUGFyYWdyYXBoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnRvZG8tZGVzY3JpcHRpb25bZGF0YS10b2RvLWlkPVwiJHt0b2RvSWR9XCJdYCk7XHJcblxyXG5cdGVkaXRUb2RvSW5wdXQudmFsdWUgPSB0aXRsZVBhcmFncmFwaC50ZXh0Q29udGVudDtcclxuXHRlZGl0VG9kb0Rlc2NyaXB0aW9uLnZhbHVlID0gZGVzY3JpcHRpb25QYXJhZ3JhcGgudGV4dENvbnRlbnQ7XHJcbn07XHJcblxyXG5lZGl0VG9kb01vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2hpZGRlbi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcclxuXHRlZGl0VG9kb0lucHV0LnZhbHVlID0gJyc7XHJcblx0ZWRpdFRvZG9EZXNjcmlwdGlvbi52YWx1ZSA9ICcnO1xyXG5cdHRvZG9JZCA9IG51bGw7XHJcblx0Y2xlYXJFZGl0VGl0bGVFcnJvcigpO1xyXG59KTtcclxuXHJcbmFkZFRvZG9Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcblx0YWRkVG9kb1RpdGxlLnZhbHVlID0gJyc7XHJcblx0YWRkVG9kb0Rlc2NyaXB0aW9uLnZhbHVlID0gJyc7XHJcblx0Y2xlYXJBZGRUb2RvRXJyb3IoKTtcclxufSk7XHJcblxyXG5hZGRUb2RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcblx0aWYgKGFkZFRvZG9UaXRsZS52YWx1ZSA9PT0gJycpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHNldEFkZFRvZG9UaXRsZUVycm9yKCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcbn0pO1xyXG5cclxuZGFzaGJvYXJkTmF2QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGFzaGJvYXJkTmF2VG9nZ2xlKTtcclxuXHJcbmJhY2tTaGFkb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkYXNoYm9hcmROYXZUb2dnbGUpO1xyXG5cclxuc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBzZWFyY2hUb2RvSGFuZGxlcik7XHJcblxyXG5hZGRUb2RvVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBjbGVhckFkZFRvZG9FcnJvcik7XHJcblxyXG5yZW1vdmVUb2RvQnRucy5mb3JFYWNoKGJ0biA9PiB7XHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlVG9kbyk7XHJcbn0pO1xyXG5lZGl0VG9kb0J0bnMuZm9yRWFjaChidG4gPT4ge1xyXG5cdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNldEVkaXRJbnB1dHMpO1xyXG59KTtcclxuY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcclxuXHRjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUNvbXBsZXRlVG9kbyk7XHJcbn0pO1xyXG5cclxuZWRpdFRvZG9JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGNsZWFyRWRpdFRpdGxlRXJyb3IpO1xyXG5cclxuc2F2ZUNoYW5nZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0aWYgKHRvZG9JZCkge1xyXG5cdFx0Y29uc3QgdGl0bGUgPSBlZGl0VG9kb0lucHV0LnZhbHVlO1xyXG5cdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBlZGl0VG9kb0Rlc2NyaXB0aW9uLnZhbHVlO1xyXG5cdFx0dXBkYXRlVG9kbyh0b2RvSWQsIHRpdGxlLCBkZXNjcmlwdGlvbik7XHJcblx0fVxyXG59KTtcclxuIl19
