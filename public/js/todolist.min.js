"use strict";var removeTodoBtns=document.querySelectorAll(".remove-todo-btn"),editTodoBtns=document.querySelectorAll(".edit-todo-btn"),editTodoPanel=document.querySelector(".edit-todo-panel"),closeTodoPanelBtn=document.querySelector(".close-todo-panel"),saveChangesBtn=document.querySelector(".save-changes"),editTodoInput=document.querySelector(".edit-todo-input"),checkboxes=document.querySelectorAll(".todo-checkbox"),todoId=null,removeTodo=function(e){var e=e.target.parentElement,o=e.id;fetch("../app/includes/remove_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+o}).then(e.remove()).catch(function(e){console.error("Wystąpił błąd:",e)})},isEditInputValid=function(){return""!==editTodoInput.value||(editTodoInput.classList.add("error"),!(editTodoInput.placeholder="Podaj prawidłową nazwę zadania"))},updateTodo=function(e,o){var t;isEditInputValid()&&((t=new URLSearchParams).append("id",e),t.append("title",o),fetch("../app/includes/edit_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then(function(){return location.reload()}).catch(function(e){console.error("Wystąpił błąd:",e)}))},toggleCompleteTodo=function(e){e=e.target.getAttribute("data-todo-id");fetch("../app/includes/complete_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).catch(function(e){console.error("Wystąpił błąd:",e)})},openEditTodoPanel=function(e){editTodoPanel.classList.add("visible"),todoId=e.target.getAttribute("data-todo-id")},closeEditTodoPanel=function(){editTodoPanel.classList.remove("visible"),editTodoInput.classList.remove("error"),editTodoInput.placeholder="Podaj nową nazwę zadania",todoId=null};removeTodoBtns.forEach(function(e){e.addEventListener("click",removeTodo)}),editTodoBtns.forEach(function(e){e.addEventListener("click",openEditTodoPanel)}),checkboxes.forEach(function(e){e.addEventListener("click",toggleCompleteTodo)}),closeTodoPanelBtn.addEventListener("click",closeEditTodoPanel),saveChangesBtn.addEventListener("click",function(){var e;todoId&&(e=editTodoInput.value,updateTodo(todoId,e))});