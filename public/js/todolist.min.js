"use strict";var removeTodoBtns=document.querySelectorAll(".remove-todo-btn"),editTodoBtns=document.querySelectorAll(".edit-todo-btn"),saveChangesBtn=document.querySelector(".save-changes"),editTodoInput=document.querySelector(".edit-todo-input"),editTodoDescription=document.querySelector(".edit-todo-description"),checkboxes=document.querySelectorAll(".todo-checkbox"),editTodoModal=document.getElementById("editTodoModal"),addTodoModal=document.getElementById("addTodoModal"),addTodoTitle=document.querySelector(".add-todo-title"),addTodoDescription=document.querySelector(".add-todo-description"),addTodoBtn=document.querySelector(".add-todo-btn"),todoId=null,setTaskCounter=function(){var e=document.querySelectorAll(".todo"),o=document.querySelector(".task-counter"),t=e.length;o.textContent=2<=t?"Masz ".concat(e.length," zadania do zrobienia"):1===t?"Masz jedno zadanie do zrobienia":"Nie masz żadnych zadań do zrobienia"},removeTodo=(setTaskCounter(),function(e){var e=e.target.parentElement,o=e.id;fetch("../app/includes/remove_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+o}).then(e.remove()).catch(function(e){console.error("Wystąpił błąd:",e)}),setTaskCounter()}),setEditTitleError=function(){editTodoInput.classList.add("error"),editTodoInput.nextElementSibling.classList.remove("d-none")},clearEditTitleError=function(){editTodoInput.classList.remove("error"),editTodoInput.nextElementSibling.classList.add("d-none")},updateTodo=function(e){var o,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;""===t?setEditTitleError():((o=new URLSearchParams).append("id",e),o.append("title",t),o.append("description",d),fetch("../app/includes/edit_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o}).then(function(){return location.reload()}).catch(function(e){console.error("Wystąpił błąd:",e)}))},setAddTodoTitleError=function(){addTodoTitle.classList.add("error"),addTodoTitle.nextElementSibling.classList.remove("d-none")},clearAddTodoError=function(){addTodoTitle.classList.remove("error"),addTodoTitle.nextElementSibling.classList.add("d-none")},toggleCompleteTodo=function(e){e=e.target.getAttribute("data-todo-id");fetch("../app/includes/complete_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).catch(function(e){console.error("Wystąpił błąd:",e)})},setEditInputs=function(e){todoId=e.target.getAttribute("data-todo-id");var e=document.querySelector('.todo-title[data-todo-id="'.concat(todoId,'"]')),o=document.querySelector('.todo-description[data-todo-id="'.concat(todoId,'"]'));editTodoInput.value=e.textContent,editTodoDescription.value=o.textContent};editTodoModal.addEventListener("hidden.bs.modal",function(){editTodoInput.value="",editTodoDescription.value="",todoId=null,clearEditTitleError()}),addTodoModal.addEventListener("hidden.bs.modal",function(){addTodoTitle.value="",addTodoDescription.value="",clearAddTodoError()}),addTodoBtn.addEventListener("click",function(e){""===addTodoTitle.value&&(e.preventDefault(),setAddTodoTitleError())}),addTodoTitle.addEventListener("input",clearAddTodoError),removeTodoBtns.forEach(function(e){e.addEventListener("click",removeTodo)}),editTodoBtns.forEach(function(e){e.addEventListener("click",setEditInputs)}),checkboxes.forEach(function(e){e.addEventListener("click",toggleCompleteTodo)}),editTodoInput.addEventListener("input",clearEditTitleError),saveChangesBtn.addEventListener("click",function(){var e,o;todoId&&(e=editTodoInput.value,o=editTodoDescription.value,updateTodo(todoId,e,o))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG9saXN0LmpzIl0sIm5hbWVzIjpbInJlbW92ZVRvZG9CdG5zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWRpdFRvZG9CdG5zIiwic2F2ZUNoYW5nZXNCdG4iLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFRvZG9JbnB1dCIsImVkaXRUb2RvRGVzY3JpcHRpb24iLCJjaGVja2JveGVzIiwiZWRpdFRvZG9Nb2RhbCIsImdldEVsZW1lbnRCeUlkIiwiYWRkVG9kb01vZGFsIiwiYWRkVG9kb1RpdGxlIiwiYWRkVG9kb0J0biIsInNldFRhc2tDb3VudGVyIiwidG9kb0l0ZW1zIiwidGFza0NvdW50ZXIiLCJ0YXNrc0Ftb3VudCIsImxlbmd0aCIsInRleHRDb250ZW50IiwibWV0aG9kIiwicGFyZW50RGl2IiwiZSIsImhlYWRlcnMiLCJ0YXJnZXQiLCJwYXJlbnRFbGVtZW50IiwiaWQiLCJmZXRjaCIsImJvZHkiLCJDb250ZW50LVR5cGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJlcnJvclBhcmFncmFwaCIsImVycm9yIiwiY2xlYXJFZGl0VGl0bGVFcnJvciIsInRvZG9JZCIsImFyZ3VtZW50cyIsInNldEVkaXRUaXRsZUVycm9yIiwicmVtb3ZlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiVVJMU2VhcmNoUGFyYW1zIiwidGhlbiIsInRpdGxlIiwidW5kZWZpbmVkIiwiZGVzY3JpcHRpb24iLCJhcHBlbmQiLCJsb2NhdGlvbiIsInJlbG9hZCIsInBhcmFtcyIsImNvbnNvbGUiLCJzZXRBZGRUb2RvVGl0bGVFcnJvciIsImNsZWFyQWRkVG9kb0Vycm9yIiwiRGVzY3JpcHRpb25QYXJhZ3JhcGgiLCJnZXRBdHRyaWJ1dGUiLCJ0aXRsZVBhcmFncmFwaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRFZGl0SW5wdXRzIiwicHJldmVudERlZmF1bHQiLCJjb25jYXQiLCJ2YWx1ZSIsInRvZ2dsZUNvbXBsZXRlVG9kbyIsInVwZGF0ZVRvZG8iLCJmb3JFYWNoIiwi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aUIsUUFBU0ssa0JBQWtCLENBQ3RELENBQUMsRUFFRHRELGNBQWNpRCxpQkFBaUIsUUFBU3JCLG1CQUFtQixFQUUzRDlCLGVBQWVtRCxpQkFBaUIsUUFBUyxXQUN4QyxJQUNPYixFQUNBRSxFQUZIVCxTQUNHTyxFQUFRcEMsY0FBY3FELE1BQ3RCZixFQUFjckMsb0JBQW9Cb0QsTUFDeENFLFdBQVcxQixPQUFRTyxFQUFPRSxDQUFXLEVBRXZDLENBQUMiLCJmaWxlIjoidG9kb2xpc3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVtb3ZlVG9kb0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVtb3ZlLXRvZG8tYnRuJyk7XHJcbmNvbnN0IGVkaXRUb2RvQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0LXRvZG8tYnRuJyk7XHJcbmNvbnN0IHNhdmVDaGFuZ2VzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhdmUtY2hhbmdlcycpO1xyXG5jb25zdCBlZGl0VG9kb0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdG9kby1pbnB1dCcpO1xyXG5jb25zdCBlZGl0VG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdG9kby1kZXNjcmlwdGlvbicpO1xyXG5jb25zdCBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8tY2hlY2tib3gnKTtcclxuY29uc3QgZWRpdFRvZG9Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0VG9kb01vZGFsJyk7XHJcbmNvbnN0IGFkZFRvZG9Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUb2RvTW9kYWwnKTtcclxuY29uc3QgYWRkVG9kb1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLXRpdGxlJyk7XHJcbmNvbnN0IGFkZFRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kby1kZXNjcmlwdGlvbicpO1xyXG5jb25zdCBhZGRUb2RvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLWJ0bicpXHJcblxyXG5sZXQgdG9kb0lkID0gbnVsbDtcclxuXHJcbmNvbnN0IHNldFRhc2tDb3VudGVyID0gKCkgPT4ge1xyXG5cdGNvbnN0IHRvZG9JdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2RvJyk7XHJcblx0Y29uc3QgdGFza0NvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1jb3VudGVyJyk7XHJcblxyXG5cdGNvbnN0IHRhc2tzQW1vdW50ID0gdG9kb0l0ZW1zLmxlbmd0aDtcclxuXHJcblx0aWYgKHRhc2tzQW1vdW50ID49IDIpIHtcclxuXHRcdHRhc2tDb3VudGVyLnRleHRDb250ZW50ID0gYE1hc3ogJHt0b2RvSXRlbXMubGVuZ3RofSB6YWRhbmlhIGRvIHpyb2JpZW5pYWA7XHJcblx0fSBlbHNlIGlmICh0YXNrc0Ftb3VudCA9PT0gMSkge1xyXG5cdFx0dGFza0NvdW50ZXIudGV4dENvbnRlbnQgPSBgTWFzeiBqZWRubyB6YWRhbmllIGRvIHpyb2JpZW5pYWA7XHJcblx0fSBlbHNlIHtcclxuXHRcdHRhc2tDb3VudGVyLnRleHRDb250ZW50ID0gJ05pZSBtYXN6IMW8YWRueWNoIHphZGHFhCBkbyB6cm9iaWVuaWEnO1xyXG5cdH1cclxufTtcclxuXHJcbnNldFRhc2tDb3VudGVyKCk7XHJcblxyXG5jb25zdCByZW1vdmVUb2RvID0gZSA9PiB7XHJcblx0Y29uc3QgcGFyZW50RGl2ID0gZS50YXJnZXQucGFyZW50RWxlbWVudDtcclxuXHRjb25zdCBpZCA9IHBhcmVudERpdi5pZDtcclxuXHJcblx0ZmV0Y2goJy4uL2FwcC9pbmNsdWRlcy9yZW1vdmVfdG9kby5pbmMucGhwJywge1xyXG5cdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuXHRcdH0sXHJcblx0XHRib2R5OiAnaWQ9JyArIGlkLFxyXG5cdH0pXHJcblx0XHQudGhlbihwYXJlbnREaXYucmVtb3ZlKCkpXHJcblx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdXeXN0xIVwacWCIGLFgsSFZDonLCBlcnJvcik7XHJcblx0XHR9KTtcclxuXHRzZXRUYXNrQ291bnRlcigpO1xyXG59O1xyXG5cclxuY29uc3Qgc2V0RWRpdFRpdGxlRXJyb3IgPSAoKSA9PiB7XHJcblx0ZWRpdFRvZG9JbnB1dC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG5cdGNvbnN0IGVycm9yUGFyYWdyYXBoID0gZWRpdFRvZG9JbnB1dC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblx0ZXJyb3JQYXJhZ3JhcGguY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbn07XHJcblxyXG5jb25zdCBjbGVhckVkaXRUaXRsZUVycm9yID0gKCkgPT4geyBcclxuXHRlZGl0VG9kb0lucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcblx0Y29uc3QgZXJyb3JQYXJhZ3JhcGggPSBlZGl0VG9kb0lucHV0Lm5leHRFbGVtZW50U2libGluZztcclxuXHRlcnJvclBhcmFncmFwaC5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuIH1cclxuXHJcblxyXG5jb25zdCB1cGRhdGVUb2RvID0gKHRvZG9JZCwgdGl0bGUgPSBudWxsLCBkZXNjcmlwdGlvbiA9IG51bGwpID0+IHtcclxuXHJcblx0aWYgKHRpdGxlID09PSAnJykge1xyXG5cdFx0c2V0RWRpdFRpdGxlRXJyb3IoKTtcclxucmV0dXJuXHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcclxuXHRcdHBhcmFtcy5hcHBlbmQoJ2lkJywgdG9kb0lkKTtcclxuXHRcdHBhcmFtcy5hcHBlbmQoJ3RpdGxlJywgdGl0bGUpO1xyXG5cdFx0cGFyYW1zLmFwcGVuZCgnZGVzY3JpcHRpb24nLCBkZXNjcmlwdGlvbik7XHJcblxyXG5cdFx0ZmV0Y2goJy4uL2FwcC9pbmNsdWRlcy9lZGl0X3RvZG8uaW5jLnBocCcsIHtcclxuXHRcdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHRcdH0sXHJcblx0XHRcdGJvZHk6IHBhcmFtcyxcclxuXHRcdH0pXHJcblx0XHRcdC50aGVuKCgpID0+IGxvY2F0aW9uLnJlbG9hZCgpKVxyXG5cdFx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1d5c3TEhXBpxYIgYsWCxIVkOicsIGVycm9yKTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3Qgc2V0QWRkVG9kb1RpdGxlRXJyb3IgPSAoKSA9PiB7XHJcblx0YWRkVG9kb1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJylcclxuXHRjb25zdCBlcnJvclBhcmFncmFwaCA9IGFkZFRvZG9UaXRsZS5uZXh0RWxlbWVudFNpYmxpbmdcclxuZXJyb3JQYXJhZ3JhcGguY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcclxufVxyXG5cclxuY29uc3QgY2xlYXJBZGRUb2RvRXJyb3IgPSAoKSA9PiB7IFxyXG5cdGFkZFRvZG9UaXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpXHJcblx0Y29uc3QgZXJyb3JQYXJhZ3JhcGggPSBhZGRUb2RvVGl0bGUubmV4dEVsZW1lbnRTaWJsaW5nXHJcbmVycm9yUGFyYWdyYXBoLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXHJcbiB9XHJcblxyXG5cclxuY29uc3QgdG9nZ2xlQ29tcGxldGVUb2RvID0gZSA9PiB7XHJcblx0Y29uc3QgaWQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9kby1pZCcpO1xyXG5cclxuXHRmZXRjaCgnLi4vYXBwL2luY2x1ZGVzL2NvbXBsZXRlX3RvZG8uaW5jLnBocCcsIHtcclxuXHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHR9LFxyXG5cdFx0Ym9keTogJ2lkPScgKyBpZCxcclxuXHR9KS5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRjb25zb2xlLmVycm9yKCdXeXN0xIVwacWCIGLFgsSFZDonLCBlcnJvcik7XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBzZXRFZGl0SW5wdXRzID0gZSA9PiB7XHJcblx0dG9kb0lkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taWQnKTtcclxuXHJcblx0Y29uc3QgdGl0bGVQYXJhZ3JhcGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAudG9kby10aXRsZVtkYXRhLXRvZG8taWQ9XCIke3RvZG9JZH1cIl1gKTtcclxuXHRjb25zdCBEZXNjcmlwdGlvblBhcmFncmFwaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50b2RvLWRlc2NyaXB0aW9uW2RhdGEtdG9kby1pZD1cIiR7dG9kb0lkfVwiXWApO1xyXG5cclxuXHRlZGl0VG9kb0lucHV0LnZhbHVlID0gdGl0bGVQYXJhZ3JhcGgudGV4dENvbnRlbnQ7XHJcblx0ZWRpdFRvZG9EZXNjcmlwdGlvbi52YWx1ZSA9IERlc2NyaXB0aW9uUGFyYWdyYXBoLnRleHRDb250ZW50O1xyXG59O1xyXG5cclxuZWRpdFRvZG9Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcblx0ZWRpdFRvZG9JbnB1dC52YWx1ZSA9ICcnO1xyXG5cdGVkaXRUb2RvRGVzY3JpcHRpb24udmFsdWUgPSAnJztcclxuXHR0b2RvSWQgPSBudWxsO1xyXG5cdGNsZWFyRWRpdFRpdGxlRXJyb3IoKVxyXG59KTtcclxuXHJcbmFkZFRvZG9Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcblx0YWRkVG9kb1RpdGxlLnZhbHVlID0gJyc7XHJcblx0YWRkVG9kb0Rlc2NyaXB0aW9uLnZhbHVlID0gJyc7XHJcblx0Y2xlYXJBZGRUb2RvRXJyb3IoKVxyXG59KTtcclxuXHJcblxyXG5hZGRUb2RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcblx0aWYgKGFkZFRvZG9UaXRsZS52YWx1ZSA9PT0gJycpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdFx0c2V0QWRkVG9kb1RpdGxlRXJyb3IoKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm5cclxuXHR9XHJcbn0gKVxyXG5cclxuYWRkVG9kb1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2xlYXJBZGRUb2RvRXJyb3IpXHJcblxyXG5yZW1vdmVUb2RvQnRucy5mb3JFYWNoKGJ0biA9PiB7XHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlVG9kbyk7XHJcbn0pO1xyXG5lZGl0VG9kb0J0bnMuZm9yRWFjaChidG4gPT4ge1xyXG5cdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNldEVkaXRJbnB1dHMpO1xyXG59KTtcclxuY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcclxuXHRjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUNvbXBsZXRlVG9kbyk7XHJcbn0pO1xyXG5cclxuZWRpdFRvZG9JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGNsZWFyRWRpdFRpdGxlRXJyb3IpXHJcblxyXG5zYXZlQ2hhbmdlc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRpZiAodG9kb0lkKSB7XHJcblx0XHRjb25zdCB0aXRsZSA9IGVkaXRUb2RvSW5wdXQudmFsdWU7XHJcblx0XHRjb25zdCBkZXNjcmlwdGlvbiA9IGVkaXRUb2RvRGVzY3JpcHRpb24udmFsdWU7XHJcblx0XHR1cGRhdGVUb2RvKHRvZG9JZCwgdGl0bGUsIGRlc2NyaXB0aW9uKTtcclxuXHR9XHJcbn0pO1xyXG4iXX0=
