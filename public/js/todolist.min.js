"use strict";var removeTodoBtns=document.querySelectorAll(".remove-todo-btn"),editTodoBtns=document.querySelectorAll(".edit-todo-btn"),saveChangesBtn=document.querySelector(".save-changes"),editTodoInput=document.querySelector(".edit-todo-input"),editTodoDescription=document.querySelector(".edit-todo-description"),checkboxes=document.querySelectorAll(".todo-checkbox"),editTodoModal=document.getElementById("editTodoModal"),addTodoModal=document.getElementById("addTodoModal"),addTodoTitle=document.querySelector(".add-todo-title"),addTodoDescription=document.querySelector(".add-todo-description"),addTodoBtn=document.querySelector(".add-todo-btn"),searchInput=document.querySelector(".search-input"),todoItems=document.querySelectorAll(".todo"),todoId=null,setTaskCounter=function(){var e=document.querySelector(".task-counter"),o=todoItems.length;e.innerHTML=2<=o?"Masz ".concat(todoItems.length," zadania do zrobienia"):1===o?"Masz jedno zadanie do zrobienia":"Nie masz żadnych zadań do zrobienia"},searchTodoHandler=(setTaskCounter(),function(){var o=searchInput.value.toLowerCase();todoItems.forEach(function(e){e.querySelector(".todo-title").textContent.toLocaleLowerCase().includes(o)?(e.classList.add("d-flex"),e.classList.remove("d-none")):(e.classList.add("d-none"),e.classList.remove("d-flex"))})}),removeTodo=function(e){e.stopPropagation();var e=e.currentTarget.getAttribute("data-todo-id"),o=document.getElementById(e);fetch("../app/includes/remove_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).then(o.remove()).catch(function(e){console.error("Wystąpił błąd:",e)}),setTaskCounter()},setEditTitleError=function(){editTodoInput.classList.add("error"),editTodoInput.nextElementSibling.classList.remove("d-none")},clearEditTitleError=function(){editTodoInput.classList.remove("error"),editTodoInput.nextElementSibling.classList.add("d-none")},updateTodo=function(e){var o,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;""===t?setEditTitleError():((o=new URLSearchParams).append("id",e),o.append("title",t),o.append("description",d),fetch("../app/includes/edit_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o}).then(function(){return location.reload()}).catch(function(e){console.error("Wystąpił błąd:",e)}))},setAddTodoTitleError=function(){addTodoTitle.classList.add("error"),addTodoTitle.nextElementSibling.classList.remove("d-none")},clearAddTodoError=function(){addTodoTitle.classList.remove("error"),addTodoTitle.nextElementSibling.classList.add("d-none")},toggleCompleteTodo=function(e){var e=e.currentTarget.getAttribute("data-todo-id"),o=document.getElementById(e);o.classList.contains("todo-done")?o.classList.remove("todo-done"):o.classList.add("todo-done"),fetch("../app/includes/complete_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).catch(function(e){console.error("Wystąpił błąd:",e)})},setEditInputs=function(e){todoId=e.currentTarget.getAttribute("data-todo-id");var e=document.querySelector('.todo-title[data-todo-id="'.concat(todoId,'"]')),o=document.querySelector('.todo-description[data-todo-id="'.concat(todoId,'"]'));editTodoInput.value=e.textContent,editTodoDescription.value=o.textContent};editTodoModal.addEventListener("hidden.bs.modal",function(){editTodoInput.value="",editTodoDescription.value="",todoId=null,clearEditTitleError()}),addTodoModal.addEventListener("hidden.bs.modal",function(){addTodoTitle.value="",addTodoDescription.value="",clearAddTodoError()}),addTodoBtn.addEventListener("click",function(e){""===addTodoTitle.value&&(e.preventDefault(),setAddTodoTitleError())}),searchInput.addEventListener("input",searchTodoHandler),addTodoTitle.addEventListener("input",clearAddTodoError),removeTodoBtns.forEach(function(e){e.addEventListener("click",removeTodo)}),editTodoBtns.forEach(function(e){e.addEventListener("click",setEditInputs)}),checkboxes.forEach(function(e){e.addEventListener("click",toggleCompleteTodo)}),editTodoInput.addEventListener("input",clearEditTitleError),saveChangesBtn.addEventListener("click",function(){var e,o;todoId&&(e=editTodoInput.value,o=editTodoDescription.value,updateTodo(todoId,e,o))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG9saXN0LmpzIl0sIm5hbWVzIjpbInJlbW92ZVRvZG9CdG5zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWRpdFRvZG9CdG5zIiwic2F2ZUNoYW5nZXNCdG4iLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFRvZG9JbnB1dCIsImVkaXRUb2RvRGVzY3JpcHRpb24iLCJjaGVja2JveGVzIiwiZWRpdFRvZG9Nb2RhbCIsImdldEVsZW1lbnRCeUlkIiwiYWRkVG9kb01vZGFsIiwiYWRkVG9kb1RpdGxlIiwiYWRkVG9kb0Rlc2NyaXB0aW9uIiwiYWRkVG9kb0J0biIsInRvZG9JdGVtcyIsInNldFRhc2tDb3VudGVyIiwidGFza0NvdW50ZXIiLCJ0YXNrc0Ftb3VudCIsImxlbmd0aCIsImlubmVySFRNTCIsImNvbmNhdCIsInNlYXJjaFRvZG9IYW5kbGVyIiwiZm9yRWFjaCIsInRvZG8iLCJzZWFyY2hJbnB1dCIsInZhbHVlIiwidG9Mb3dlckNhc2UiLCJjbGFzc0xpc3QiLCJ0ZXh0Q29udGVudCIsInRvTG9jYWxlTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJzZWFyY2hWYWx1ZSIsImFkZCIsInJlbW92ZSIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJpZCIsImN1cnJlbnRUYXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVUb2RvIiwiYm9keSIsInRoZW4iLCJmZXRjaCIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJzZXRFZGl0VGl0bGVFcnJvciIsImVycm9yUGFyYWdyYXBoIiwidG9kb0RpdiIsImNsZWFyRWRpdFRpdGxlRXJyb3IiLCJlcnJvciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJhcmd1bWVudHMiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJVUkxTZWFyY2hQYXJhbXMiLCJhcHBlbmQiLCJ0b2RvSWQiLCJ1cGRhdGVUb2RvIiwiY29uc29sZSIsInVuZGVmaW5lZCIsInBhcmFtcyIsIm1ldGhvZCIsInRvZ2dsZUNvbXBsZXRlVG9kbyIsInNldEFkZFRvZG9UaXRsZUVycm9yIiwiY2xlYXJBZGRUb2RvRXJyb3IiLCJzZXRFZGl0SW5wdXRzIiwiZGVzY3JpcHRpb25QYXJhZ3JhcGgiLCJhZGRFdmVudExpc3RlbmVyIiwidGl0bGVQYXJhZ3JhcGgiLCJwcmV2ZW50RGVmYXVsdCIsImJ0biIsImNoZWNrYm94Il0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxlQUFpQkMsU0FBU0MsaUJBQWlCLGtCQUFrQixFQUM3REMsYUFBZUYsU0FBU0MsaUJBQWlCLGdCQUFnQixFQUR6REYsZUFBaUJDLFNBQVNDLGNBQWdCLGVBQUMsRUFDM0NDLGNBQWVGLFNBQVNDLGNBQWlCLGtCQUFpQixFQUMxREUsb0JBQWlCSCxTQUFTSSxjQUFjLHdCQUFnQixFQUN4REMsV0FBYUwsU0FBV0MsaUJBQWUsZ0JBQWtCLEVBQ3pESyxjQUFBQSxTQUFzQk4sZUFBU0ksZUFBYyxFQUM3Q0csYUFBYVAsU0FBU0MsZUFBaUIsY0FBZ0IsRUFDdkRPLGFBQWdCUixTQUFTUyxjQUFlLGlCQUFnQixFQUN4REMsbUJBQXVCVixTQUFDUyxjQUFlLHVCQUFlLEVBQ3RERSxXQUFlWCxTQUFTSSxjQUFjLGVBQUEsRUFDdENRLFlBQUFBLFNBQXFCWixjQUFTSSxlQUFjLEVBQzVDUyxVQUFhYixTQUFTSSxpQkFBYyxPQUFBLEVBRXBDVSxPQUFTLEtBSVRDLGVBQWlCLFdBQ25CLElBQU1DLEVBQWNoQixTQUFTSSxjQUFjLGVBQWdCLEVBSXZEYSxFQUFrQkgsVUFBQUksT0FHbEJGLEVBQVlHLFVBRExGLEdBQVZBLEVBQ3dCLFFBQUFHLE9BQUFOLFVBQUFJLE9BQUEsdUJBQUEsRUFDbEIsSUFBQUQsRUFDa0Isa0NBRTVCLHFDQUlELEVBTUNJLG1CQVJETixlQUtVTyxFQUdhLFdBTHZCLElBTUVDLEVBQWNDLFlBQUtDLE1BQVNDLFlBQUEsRUFKOUJaLFVBTUVRLFFBQU0sU0FBQUMsR0FDREksRUFBYXZCLGNBQVUsYUFBQSxFQUFBd0IsWUFBQUMsa0JBQUEsRUFFN0JDLFNBQUFDLENBQUEsR0FDRFIsRUFB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IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZW1vdmUtdG9kby1idG4nKTtcclxuY29uc3QgZWRpdFRvZG9CdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVkaXQtdG9kby1idG4nKTtcclxuY29uc3Qgc2F2ZUNoYW5nZXNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2F2ZS1jaGFuZ2VzJyk7XHJcbmNvbnN0IGVkaXRUb2RvSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10b2RvLWlucHV0Jyk7XHJcbmNvbnN0IGVkaXRUb2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10b2RvLWRlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kby1jaGVja2JveCcpO1xyXG5jb25zdCBlZGl0VG9kb01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRUb2RvTW9kYWwnKTtcclxuY29uc3QgYWRkVG9kb01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFRvZG9Nb2RhbCcpO1xyXG5jb25zdCBhZGRUb2RvVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8tdGl0bGUnKTtcclxuY29uc3QgYWRkVG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLWRlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IGFkZFRvZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8tYnRuJylcclxuY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWlucHV0JylcclxuY29uc3QgdG9kb0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8nKTtcclxuXHJcbmxldCB0b2RvSWQgPSBudWxsO1xyXG5cclxuY29uc3Qgc2V0VGFza0NvdW50ZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB0YXNrQ291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWNvdW50ZXInKTtcclxuXHJcbiAgICBjb25zdCB0YXNrc0Ftb3VudCA9IHRvZG9JdGVtcy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKHRhc2tzQW1vdW50ID49IDIpIHtcclxuICAgICAgICB0YXNrQ291bnRlci5pbm5lckhUTUwgPSBgTWFzeiAke3RvZG9JdGVtcy5sZW5ndGh9IHphZGFuaWEgZG8genJvYmllbmlhYDtcclxuICAgIH0gZWxzZSBpZiAodGFza3NBbW91bnQgPT09IDEpIHtcclxuICAgICAgICB0YXNrQ291bnRlci5pbm5lckhUTUwgPSBgTWFzeiBqZWRubyB6YWRhbmllIGRvIHpyb2JpZW5pYWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRhc2tDb3VudGVyLmlubmVySFRNTCA9IGBOaWUgbWFzeiDFvGFkbnljaCB6YWRhxYQgZG8genJvYmllbmlhYDtcclxuICAgIH1cclxufTtcclxuXHJcbnNldFRhc2tDb3VudGVyKCk7XHJcblxyXG5jb25zdCBzZWFyY2hUb2RvSGFuZGxlciA9ICgpID0+IHsgXHJcbmNvbnN0IHNlYXJjaFZhbHVlID0gc2VhcmNoSW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKVxyXG5cclxudG9kb0l0ZW1zLmZvckVhY2godG9kbyA9PiB7XHJcblx0Y29uc3QgdG9kb1RpdGxlID0gdG9kby5xdWVyeVNlbGVjdG9yKCcudG9kby10aXRsZScpLnRleHRDb250ZW50LnRvTG9jYWxlTG93ZXJDYXNlKClcclxuXHJcblx0aWYgKHRvZG9UaXRsZS5pbmNsdWRlcyhzZWFyY2hWYWx1ZSkpIHtcclxuXHRcdHRvZG8uY2xhc3NMaXN0LmFkZCgnZC1mbGV4JylcclxuXHRcdHRvZG8uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcclxuXHR9IGVsc2Uge1xyXG5cdFx0dG9kby5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKVxyXG5cdFx0dG9kby5jbGFzc0xpc3QucmVtb3ZlKCdkLWZsZXgnKVxyXG5cdH1cclxufSlcclxuIH1cclxuXHJcbmNvbnN0IHJlbW92ZVRvZG8gPSBlID0+IHtcclxuXHRlLnN0b3BQcm9wYWdhdGlvbigpXHJcblx0Y29uc3QgaWQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taWQnKVxyXG4gY29uc3QgdG9kb0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxyXG5cclxuXHRmZXRjaCgnLi4vYXBwL2luY2x1ZGVzL3JlbW92ZV90b2RvLmluYy5waHAnLCB7XHJcblx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxyXG5cdFx0fSxcclxuXHRcdGJvZHk6ICdpZD0nICsgaWQsXHJcblx0fSlcclxuXHRcdC50aGVuKHRvZG9EaXYucmVtb3ZlKCkpXHJcblx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdXeXN0xIVwacWCIGLFgsSFZDonLCBlcnJvcik7XHJcblx0XHR9KTtcclxuXHRzZXRUYXNrQ291bnRlcigpO1xyXG59O1xyXG5cclxuY29uc3Qgc2V0RWRpdFRpdGxlRXJyb3IgPSAoKSA9PiB7XHJcblx0ZWRpdFRvZG9JbnB1dC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG5cdGNvbnN0IGVycm9yUGFyYWdyYXBoID0gZWRpdFRvZG9JbnB1dC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblx0ZXJyb3JQYXJhZ3JhcGguY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbn07XHJcblxyXG5jb25zdCBjbGVhckVkaXRUaXRsZUVycm9yID0gKCkgPT4geyBcclxuXHRlZGl0VG9kb0lucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcblx0Y29uc3QgZXJyb3JQYXJhZ3JhcGggPSBlZGl0VG9kb0lucHV0Lm5leHRFbGVtZW50U2libGluZztcclxuXHRlcnJvclBhcmFncmFwaC5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuIH1cclxuXHJcblxyXG5jb25zdCB1cGRhdGVUb2RvID0gKHRvZG9JZCwgdGl0bGUgPSBudWxsLCBkZXNjcmlwdGlvbiA9IG51bGwpID0+IHtcclxuXHJcblx0aWYgKHRpdGxlID09PSAnJykge1xyXG5cdFx0c2V0RWRpdFRpdGxlRXJyb3IoKTtcclxucmV0dXJuXHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcclxuXHRcdHBhcmFtcy5hcHBlbmQoJ2lkJywgdG9kb0lkKTtcclxuXHRcdHBhcmFtcy5hcHBlbmQoJ3RpdGxlJywgdGl0bGUpO1xyXG5cdFx0cGFyYW1zLmFwcGVuZCgnZGVzY3JpcHRpb24nLCBkZXNjcmlwdGlvbik7XHJcblxyXG5cdFx0ZmV0Y2goJy4uL2FwcC9pbmNsdWRlcy9lZGl0X3RvZG8uaW5jLnBocCcsIHtcclxuXHRcdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHRcdH0sXHJcblx0XHRcdGJvZHk6IHBhcmFtcyxcclxuXHRcdH0pXHJcblx0XHRcdC50aGVuKCgpID0+IGxvY2F0aW9uLnJlbG9hZCgpKVxyXG5cdFx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1d5c3TEhXBpxYIgYsWCxIVkOicsIGVycm9yKTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3Qgc2V0QWRkVG9kb1RpdGxlRXJyb3IgPSAoKSA9PiB7XHJcblx0YWRkVG9kb1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJylcclxuXHRjb25zdCBlcnJvclBhcmFncmFwaCA9IGFkZFRvZG9UaXRsZS5uZXh0RWxlbWVudFNpYmxpbmdcclxuZXJyb3JQYXJhZ3JhcGguY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcclxufVxyXG5cclxuY29uc3QgY2xlYXJBZGRUb2RvRXJyb3IgPSAoKSA9PiB7IFxyXG5cdGFkZFRvZG9UaXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpXHJcblx0Y29uc3QgZXJyb3JQYXJhZ3JhcGggPSBhZGRUb2RvVGl0bGUubmV4dEVsZW1lbnRTaWJsaW5nXHJcbmVycm9yUGFyYWdyYXBoLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpXHJcbiB9XHJcblxyXG5cclxuY29uc3QgdG9nZ2xlQ29tcGxldGVUb2RvID0gZSA9PiB7XHJcblx0Y29uc3QgaWQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taWQnKTtcclxuXHJcbmNvbnN0IHRvZG9EaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcclxuXHJcbmlmICh0b2RvRGl2LmNsYXNzTGlzdC5jb250YWlucygndG9kby1kb25lJykpIHtcclxuXHR0b2RvRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3RvZG8tZG9uZScpXHJcbn0gZWxzZSB7XHJcblx0dG9kb0Rpdi5jbGFzc0xpc3QuYWRkKCd0b2RvLWRvbmUnKVxyXG59XHJcblxyXG5cclxuXHRmZXRjaCgnLi4vYXBwL2luY2x1ZGVzL2NvbXBsZXRlX3RvZG8uaW5jLnBocCcsIHtcclxuXHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHR9LFxyXG5cdFx0Ym9keTogJ2lkPScgKyBpZCxcclxuXHR9KS5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRjb25zb2xlLmVycm9yKCdXeXN0xIVwacWCIGLFgsSFZDonLCBlcnJvcik7XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBzZXRFZGl0SW5wdXRzID0gZSA9PiB7XHJcblx0dG9kb0lkID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWlkJyk7XHJcblxyXG5cdGNvbnN0IHRpdGxlUGFyYWdyYXBoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnRvZG8tdGl0bGVbZGF0YS10b2RvLWlkPVwiJHt0b2RvSWR9XCJdYCk7XHJcblx0Y29uc3QgZGVzY3JpcHRpb25QYXJhZ3JhcGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAudG9kby1kZXNjcmlwdGlvbltkYXRhLXRvZG8taWQ9XCIke3RvZG9JZH1cIl1gKTtcclxuXHJcblx0ZWRpdFRvZG9JbnB1dC52YWx1ZSA9IHRpdGxlUGFyYWdyYXBoLnRleHRDb250ZW50O1xyXG5cdGVkaXRUb2RvRGVzY3JpcHRpb24udmFsdWUgPSBkZXNjcmlwdGlvblBhcmFncmFwaC50ZXh0Q29udGVudDtcclxufTtcclxuXHJcbmVkaXRUb2RvTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xyXG5cdGVkaXRUb2RvSW5wdXQudmFsdWUgPSAnJztcclxuXHRlZGl0VG9kb0Rlc2NyaXB0aW9uLnZhbHVlID0gJyc7XHJcblx0dG9kb0lkID0gbnVsbDtcclxuXHRjbGVhckVkaXRUaXRsZUVycm9yKClcclxufSk7XHJcblxyXG5hZGRUb2RvTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xyXG5cdGFkZFRvZG9UaXRsZS52YWx1ZSA9ICcnO1xyXG5cdGFkZFRvZG9EZXNjcmlwdGlvbi52YWx1ZSA9ICcnO1xyXG5cdGNsZWFyQWRkVG9kb0Vycm9yKClcclxufSk7XHJcblxyXG5cclxuYWRkVG9kb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG5cdGlmIChhZGRUb2RvVGl0bGUudmFsdWUgPT09ICcnKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KClcclxuXHRcdHNldEFkZFRvZG9UaXRsZUVycm9yKClcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuXHJcblx0fVxyXG59IClcclxuXHJcbnNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgc2VhcmNoVG9kb0hhbmRsZXIpXHJcblxyXG5hZGRUb2RvVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBjbGVhckFkZFRvZG9FcnJvcilcclxuXHJcbnJlbW92ZVRvZG9CdG5zLmZvckVhY2goYnRuID0+IHtcclxuXHRidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVUb2RvKTtcclxufSk7XHJcbmVkaXRUb2RvQnRucy5mb3JFYWNoKGJ0biA9PiB7XHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2V0RWRpdElucHV0cyk7XHJcbn0pO1xyXG5jaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG5cdGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQ29tcGxldGVUb2RvKTtcclxufSk7XHJcblxyXG5lZGl0VG9kb0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2xlYXJFZGl0VGl0bGVFcnJvcilcclxuXHJcbnNhdmVDaGFuZ2VzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGlmICh0b2RvSWQpIHtcclxuXHRcdGNvbnN0IHRpdGxlID0gZWRpdFRvZG9JbnB1dC52YWx1ZTtcclxuXHRcdGNvbnN0IGRlc2NyaXB0aW9uID0gZWRpdFRvZG9EZXNjcmlwdGlvbi52YWx1ZTtcclxuXHRcdHVwZGF0ZVRvZG8odG9kb0lkLCB0aXRsZSwgZGVzY3JpcHRpb24pO1xyXG5cdH1cclxufSk7XHJcbiJdfQ==
