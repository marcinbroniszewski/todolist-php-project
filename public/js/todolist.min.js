"use strict";var removeTodoBtns=document.querySelectorAll(".remove-todo-btn"),editTodoBtns=document.querySelectorAll(".edit-todo-btn"),saveChangesBtn=document.querySelector(".save-changes"),editTodoInput=document.querySelector(".edit-todo-input"),editTodoDescription=document.querySelector(".edit-todo-description"),checkboxes=document.querySelectorAll(".todo-checkbox"),editTodoModal=document.getElementById("editTodoModal"),addTodoModal=document.getElementById("addTodoModal"),addTodoTitle=document.querySelector(".add-todo-title"),addTodoDescription=document.querySelector(".add-todo-description"),addTodoBtn=document.querySelector(".add-todo-btn"),todoId=null,setTaskCounter=function(){var e=document.querySelectorAll(".todo"),o=document.querySelector(".task-counter"),t=e.length;o.innerHTML=(2<=t?"Masz ".concat(e.length," zadania do zrobienia "):1===t?"Masz jedno zadanie do zrobienia ":"Nie masz żadnych zadań do zrobienia ").concat(o.innerHTML)},removeTodo=(setTaskCounter(),function(e){var e=e.target.parentElement,o=e.id;fetch("../app/includes/remove_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+o}).then(e.remove()).catch(function(e){console.error("Wystąpił błąd:",e)}),setTaskCounter()}),setEditTitleError=function(){editTodoInput.classList.add("error"),editTodoInput.nextElementSibling.classList.remove("d-none")},clearEditTitleError=function(){editTodoInput.classList.remove("error"),editTodoInput.nextElementSibling.classList.add("d-none")},updateTodo=function(e){var o,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;""===t?setEditTitleError():((o=new URLSearchParams).append("id",e),o.append("title",t),o.append("description",d),fetch("../app/includes/edit_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o}).then(function(){return location.reload()}).catch(function(e){console.error("Wystąpił błąd:",e)}))},setAddTodoTitleError=function(){addTodoTitle.classList.add("error"),addTodoTitle.nextElementSibling.classList.remove("d-none")},clearAddTodoError=function(){addTodoTitle.classList.remove("error"),addTodoTitle.nextElementSibling.classList.add("d-none")},toggleCompleteTodo=function(e){var e=e.target.getAttribute("data-todo-id"),o=document.getElementById(e);o.classList.contains("todo-done")?o.classList.remove("todo-done"):o.classList.add("todo-done"),fetch("../app/includes/complete_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).catch(function(e){console.error("Wystąpił błąd:",e)})},setEditInputs=function(e){todoId=e.target.getAttribute("data-todo-id");var e=document.querySelector('.todo-title[data-todo-id="'.concat(todoId,'"]')),o=document.querySelector('.todo-description[data-todo-id="'.concat(todoId,'"]'));editTodoInput.value=e.textContent,editTodoDescription.value=o.textContent};editTodoModal.addEventListener("hidden.bs.modal",function(){editTodoInput.value="",editTodoDescription.value="",todoId=null,clearEditTitleError()}),addTodoModal.addEventListener("hidden.bs.modal",function(){addTodoTitle.value="",addTodoDescription.value="",clearAddTodoError()}),addTodoBtn.addEventListener("click",function(e){""===addTodoTitle.value&&(e.preventDefault(),setAddTodoTitleError())}),addTodoTitle.addEventListener("input",clearAddTodoError),removeTodoBtns.forEach(function(e){e.addEventListener("click",removeTodo)}),editTodoBtns.forEach(function(e){e.addEventListener("click",setEditInputs)}),checkboxes.forEach(function(e){e.addEventListener("click",toggleCompleteTodo)}),editTodoInput.addEventListener("input",clearEditTitleError),saveChangesBtn.addEventListener("click",function(){var e,o;todoId&&(e=editTodoInput.value,o=editTodoDescription.value,updateTodo(todoId,e,o))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG9saXN0LmpzIl0sIm5hbWVzIjpbInJlbW92ZVRvZG9CdG5zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWRpdFRvZG9CdG5zIiwic2F2ZUNoYW5nZXNCdG4iLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFRvZG9JbnB1dCIsImVkaXRUb2RvRGVzY3JpcHRpb24iLCJjaGVja2JveGVzIiwiZWRpdFRvZG9Nb2RhbCIsImdldEVsZW1lbnRCeUlkIiwiYWRkVG9kb01vZGFsIiwiYWRkVG9kb1RpdGxlIiwiYWRkVG9kb0J0biIsInNldFRhc2tDb3VudGVyIiwidG9kb0l0ZW1zIiwidGFza0NvdW50ZXIiLCJ0YXNrc0Ftb3VudCIsImxlbmd0aCIsImlubmVySFRNTCIsImNvbmNhdCIsIm1ldGhvZCIsInBhcmVudERpdiIsImUiLCJoZWFkZXJzIiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImlkIiwiZmV0Y2giLCJib2R5IiwiQ29udGVudC1UeXBlIiwiY2xhc3NMaXN0IiwiYWRkIiwiZXJyb3JQYXJhZ3JhcGgiLCJlcnJvciIsImNsZWFyRWRpdFRpdGxlRXJyb3IiLCJ0b2RvSWQiLCJhcmd1bWVudHMiLCJzZXRFZGl0VGl0bGVFcnJvciIsInJlbW92ZSIsIm5leHRFbGVtZW50U2libGluZyIsIlVSTFNlYXJjaFBhcmFtcyIsInRoZW4iLCJ0aXRsZSIsInVuZGVmaW5lZCIsImRlc2NyaXB0aW9uIiwiYXBwZW5kIiwibG9jYXRpb24iLCJyZWxvYWQiLCJwYXJhbXMiLCJjb25zb2xlIiwic2V0QWRkVG9kb1RpdGxlRXJyb3IiLCJjbGVhckFkZFRvZG9FcnJvciIsInRvZG9EaXYiLCJjb250YWlucyIsImdldEF0dHJpYnV0ZSIsInNldEVkaXRJbnB1dHMiLCJ0aXRsZVBhcmFncmFwaCIsIkRlc2NyaXB0aW9uUGFyYWdyYXBoIiwidmFsdWUiLCJhZGRUb2RvRGVzY3JpcHRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0ZXh0Q29udGVudCIsImZvckVhY2giLCJidG4iLCJyZW1vdmVUb2RvIiwiY2hlY2tib3giLCJ0b2dnbGVDb21wbGV0ZVRvZG8iLCJ1cGRhdGVUb2RvIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxlQUFpQkMsU0FBU0MsaUJBQWlCLGtCQUFrQixFQUM3REMsYUFBZUYsU0FBU0MsaUJBQWlCLGdCQUFnQixFQUR6REYsZUFBaUJDLFNBQVNDLGNBQWdCLGVBQUMsRUFDM0NDLGNBQWVGLFNBQVNDLGNBQWlCLGtCQUFpQixFQUMxREUsb0JBQWlCSCxTQUFTSSxjQUFjLHdCQUFnQixFQUN4REMsV0FBYUwsU0FBV0MsaUJBQWUsZ0JBQWtCLEVBQ3pESyxjQUFBQSxTQUFzQk4sZUFBU0ksZUFBYyxFQUM3Q0csYUFBYVAsU0FBU0MsZUFBaUIsY0FBZ0IsRUFDdkRPLGFBQWdCUixTQUFTUyxjQUFlLGlCQUFnQixFQUN4REMsbUJBQXVCVixTQUFDUyxjQUFlLHVCQUFlLEVBQ3RERSxXQUFlWCxTQUFTSSxjQUFjLGVBQUEsRUFFdENRLE9BQUFBLEtBSUFDLGVBQWlCLFdBQ25CLElBQU1DLEVBQVlkLFNBQVNDLGlCQUFpQixPQUFRLEVBQzlDYyxFQUFjZixTQUFTSSxjQUFjLGVBQWdCLEVBSXZEWSxFQUFrQkYsRUFBQUcsT0FHbEJGLEVBQVlHLFdBRExGLEdBQVZBLEVBQ3dCLFFBQUFHLE9BQUFMLEVBQUFHLE9BQUEsd0JBQUEsRUFDbEIsSUFBQUQsRUFDa0IsbUNBRTVCLHdDQUo0QkcsT0FBaURKLEVBQVlHLFNBQUEsQ0FRMUYsRUFLRUUsWUFQRlAsZUFJWVEsRUFHSSxTQUFBQyxHQUpmLElBS0NDLEVBQVNELEVBQUFFLE9BQUFDLGNBQ1JDLEVBQUFMLEVBQWdCSyxHQUhsQkMsTUFLQ0Msc0NBQWNGLENBQ2ZOLE9BQ09DLE9BTE5FLFFBT1EsQ0FDUE0sZUFBQyxtQ0FDSGhCLEVBQ0FlLEtBQUEsTUFBQUYsQ0FFRCxDQUFBLEVBQ0NyQixLQUFBQSxFQUFjeUIsT0FBUyxDQUFDQyxFQUFBQSxNQUNsQkMsU0FBQUEsR0FDTkEs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QXFCLEVBSXZCLENBQUUsRUFFRnZDLGFBQWFrRCxpQkFBaUIsUUFBU1YsaUJBQWlCLEVBRXhEcEQsZUFBZWdFLFFBQVEsU0FBQUMsR0FDdEJBLEVBQUlILGlCQUFpQixRQUFTSSxVQUFVLENBQ3pDLENBQUMsRUFDRC9ELGFBQWE2RCxRQUFRLFNBQUFDLEdBQ3BCQSxFQUFJSCxpQkFBaUIsUUFBU04sYUFBYSxDQUM1QyxDQUFDLEVBQ0RoRCxXQUFXd0QsUUFBUSxTQUFBRyxHQUNsQkEsRUFBU0wsaUJBQWlCLFFBQVNNLGtCQUFrQixDQUN0RCxDQUFDLEVBRUQ5RCxjQUFjd0QsaUJBQWlCLFFBQVMzQixtQkFBbUIsRUFFM0QvQixlQUFlMEQsaUJBQWlCLFFBQVMsV0FDeEMsSUFDT25CLEVBQ0FFLEVBRkhULFNBQ0dPLEVBQVFyQyxjQUFjcUQsTUFDdEJkLEVBQWN0QyxvQkFBb0JvRCxNQUN4Q1UsV0FBV2pDLE9BQVFPLEVBQU9FLENBQVcsRUFFdkMsQ0FBQyIsImZpbGUiOiJ0b2RvbGlzdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZW1vdmVUb2RvQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZW1vdmUtdG9kby1idG4nKTtcclxuY29uc3QgZWRpdFRvZG9CdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVkaXQtdG9kby1idG4nKTtcclxuY29uc3Qgc2F2ZUNoYW5nZXNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2F2ZS1jaGFuZ2VzJyk7XHJcbmNvbnN0IGVkaXRUb2RvSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10b2RvLWlucHV0Jyk7XHJcbmNvbnN0IGVkaXRUb2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10b2RvLWRlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kby1jaGVja2JveCcpO1xyXG5jb25zdCBlZGl0VG9kb01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRUb2RvTW9kYWwnKTtcclxuY29uc3QgYWRkVG9kb01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFRvZG9Nb2RhbCcpO1xyXG5jb25zdCBhZGRUb2RvVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8tdGl0bGUnKTtcclxuY29uc3QgYWRkVG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLWRlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IGFkZFRvZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8tYnRuJylcclxuXHJcbmxldCB0b2RvSWQgPSBudWxsO1xyXG5cclxuY29uc3Qgc2V0VGFza0NvdW50ZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB0b2RvSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kbycpO1xyXG4gICAgY29uc3QgdGFza0NvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1jb3VudGVyJyk7XHJcblxyXG4gICAgY29uc3QgdGFza3NBbW91bnQgPSB0b2RvSXRlbXMubGVuZ3RoO1xyXG5cclxuICAgIGlmICh0YXNrc0Ftb3VudCA+PSAyKSB7XHJcbiAgICAgICAgdGFza0NvdW50ZXIuaW5uZXJIVE1MID0gYE1hc3ogJHt0b2RvSXRlbXMubGVuZ3RofSB6YWRhbmlhIGRvIHpyb2JpZW5pYSAke3Rhc2tDb3VudGVyLmlubmVySFRNTH1gO1xyXG4gICAgfSBlbHNlIGlmICh0YXNrc0Ftb3VudCA9PT0gMSkge1xyXG4gICAgICAgIHRhc2tDb3VudGVyLmlubmVySFRNTCA9IGBNYXN6IGplZG5vIHphZGFuaWUgZG8genJvYmllbmlhICR7dGFza0NvdW50ZXIuaW5uZXJIVE1MfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRhc2tDb3VudGVyLmlubmVySFRNTCA9IGBOaWUgbWFzeiDFvGFkbnljaCB6YWRhxYQgZG8genJvYmllbmlhICR7dGFza0NvdW50ZXIuaW5uZXJIVE1MfWA7XHJcbiAgICB9XHJcbn07XHJcblxyXG5zZXRUYXNrQ291bnRlcigpO1xyXG5cclxuY29uc3QgcmVtb3ZlVG9kbyA9IGUgPT4ge1xyXG5cdGNvbnN0IHBhcmVudERpdiA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcblx0Y29uc3QgaWQgPSBwYXJlbnREaXYuaWQ7XHJcblxyXG5cdGZldGNoKCcuLi9hcHAvaW5jbHVkZXMvcmVtb3ZlX3RvZG8uaW5jLnBocCcsIHtcclxuXHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHR9LFxyXG5cdFx0Ym9keTogJ2lkPScgKyBpZCxcclxuXHR9KVxyXG5cdFx0LnRoZW4ocGFyZW50RGl2LnJlbW92ZSgpKVxyXG5cdFx0LmNhdGNoKGVycm9yID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignV3lzdMSFcGnFgiBixYLEhWQ6JywgZXJyb3IpO1xyXG5cdFx0fSk7XHJcblx0c2V0VGFza0NvdW50ZXIoKTtcclxufTtcclxuXHJcbmNvbnN0IHNldEVkaXRUaXRsZUVycm9yID0gKCkgPT4ge1xyXG5cdGVkaXRUb2RvSW5wdXQuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuXHRjb25zdCBlcnJvclBhcmFncmFwaCA9IGVkaXRUb2RvSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cdGVycm9yUGFyYWdyYXBoLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG59O1xyXG5cclxuY29uc3QgY2xlYXJFZGl0VGl0bGVFcnJvciA9ICgpID0+IHsgXHJcblx0ZWRpdFRvZG9JbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xyXG5cdGNvbnN0IGVycm9yUGFyYWdyYXBoID0gZWRpdFRvZG9JbnB1dC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblx0ZXJyb3JQYXJhZ3JhcGguY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiB9XHJcblxyXG5cclxuY29uc3QgdXBkYXRlVG9kbyA9ICh0b2RvSWQsIHRpdGxlID0gbnVsbCwgZGVzY3JpcHRpb24gPSBudWxsKSA9PiB7XHJcblxyXG5cdGlmICh0aXRsZSA9PT0gJycpIHtcclxuXHRcdHNldEVkaXRUaXRsZUVycm9yKCk7XHJcbnJldHVyblxyXG5cdH0gZWxzZSB7XHJcblx0XHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XHJcblx0XHRwYXJhbXMuYXBwZW5kKCdpZCcsIHRvZG9JZCk7XHJcblx0XHRwYXJhbXMuYXBwZW5kKCd0aXRsZScsIHRpdGxlKTtcclxuXHRcdHBhcmFtcy5hcHBlbmQoJ2Rlc2NyaXB0aW9uJywgZGVzY3JpcHRpb24pO1xyXG5cclxuXHRcdGZldGNoKCcuLi9hcHAvaW5jbHVkZXMvZWRpdF90b2RvLmluYy5waHAnLCB7XHJcblx0XHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRib2R5OiBwYXJhbXMsXHJcblx0XHR9KVxyXG5cdFx0XHQudGhlbigoKSA9PiBsb2NhdGlvbi5yZWxvYWQoKSlcclxuXHRcdFx0LmNhdGNoKGVycm9yID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdXeXN0xIVwacWCIGLFgsSFZDonLCBlcnJvcik7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHNldEFkZFRvZG9UaXRsZUVycm9yID0gKCkgPT4ge1xyXG5cdGFkZFRvZG9UaXRsZS5jbGFzc0xpc3QuYWRkKCdlcnJvcicpXHJcblx0Y29uc3QgZXJyb3JQYXJhZ3JhcGggPSBhZGRUb2RvVGl0bGUubmV4dEVsZW1lbnRTaWJsaW5nXHJcbmVycm9yUGFyYWdyYXBoLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXHJcbn1cclxuXHJcbmNvbnN0IGNsZWFyQWRkVG9kb0Vycm9yID0gKCkgPT4geyBcclxuXHRhZGRUb2RvVGl0bGUuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKVxyXG5cdGNvbnN0IGVycm9yUGFyYWdyYXBoID0gYWRkVG9kb1RpdGxlLm5leHRFbGVtZW50U2libGluZ1xyXG5lcnJvclBhcmFncmFwaC5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKVxyXG4gfVxyXG5cclxuXHJcbmNvbnN0IHRvZ2dsZUNvbXBsZXRlVG9kbyA9IGUgPT4ge1xyXG5cdGNvbnN0IGlkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taWQnKTtcclxuXHJcbmNvbnN0IHRvZG9EaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcclxuXHJcbmlmICh0b2RvRGl2LmNsYXNzTGlzdC5jb250YWlucygndG9kby1kb25lJykpIHtcclxuXHR0b2RvRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3RvZG8tZG9uZScpXHJcbn0gZWxzZSB7XHJcblx0dG9kb0Rpdi5jbGFzc0xpc3QuYWRkKCd0b2RvLWRvbmUnKVxyXG59XHJcblxyXG5cclxuXHRmZXRjaCgnLi4vYXBwL2luY2x1ZGVzL2NvbXBsZXRlX3RvZG8uaW5jLnBocCcsIHtcclxuXHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHR9LFxyXG5cdFx0Ym9keTogJ2lkPScgKyBpZCxcclxuXHR9KS5jYXRjaChlcnJvciA9PiB7XHJcblx0XHRjb25zb2xlLmVycm9yKCdXeXN0xIVwacWCIGLFgsSFZDonLCBlcnJvcik7XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBzZXRFZGl0SW5wdXRzID0gZSA9PiB7XHJcblx0dG9kb0lkID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taWQnKTtcclxuXHJcblx0Y29uc3QgdGl0bGVQYXJhZ3JhcGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAudG9kby10aXRsZVtkYXRhLXRvZG8taWQ9XCIke3RvZG9JZH1cIl1gKTtcclxuXHRjb25zdCBEZXNjcmlwdGlvblBhcmFncmFwaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50b2RvLWRlc2NyaXB0aW9uW2RhdGEtdG9kby1pZD1cIiR7dG9kb0lkfVwiXWApO1xyXG5cclxuXHRlZGl0VG9kb0lucHV0LnZhbHVlID0gdGl0bGVQYXJhZ3JhcGgudGV4dENvbnRlbnQ7XHJcblx0ZWRpdFRvZG9EZXNjcmlwdGlvbi52YWx1ZSA9IERlc2NyaXB0aW9uUGFyYWdyYXBoLnRleHRDb250ZW50O1xyXG59O1xyXG5cclxuZWRpdFRvZG9Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcblx0ZWRpdFRvZG9JbnB1dC52YWx1ZSA9ICcnO1xyXG5cdGVkaXRUb2RvRGVzY3JpcHRpb24udmFsdWUgPSAnJztcclxuXHR0b2RvSWQgPSBudWxsO1xyXG5cdGNsZWFyRWRpdFRpdGxlRXJyb3IoKVxyXG59KTtcclxuXHJcbmFkZFRvZG9Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcblx0YWRkVG9kb1RpdGxlLnZhbHVlID0gJyc7XHJcblx0YWRkVG9kb0Rlc2NyaXB0aW9uLnZhbHVlID0gJyc7XHJcblx0Y2xlYXJBZGRUb2RvRXJyb3IoKVxyXG59KTtcclxuXHJcblxyXG5hZGRUb2RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcblx0aWYgKGFkZFRvZG9UaXRsZS52YWx1ZSA9PT0gJycpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdFx0c2V0QWRkVG9kb1RpdGxlRXJyb3IoKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm5cclxuXHR9XHJcbn0gKVxyXG5cclxuYWRkVG9kb1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2xlYXJBZGRUb2RvRXJyb3IpXHJcblxyXG5yZW1vdmVUb2RvQnRucy5mb3JFYWNoKGJ0biA9PiB7XHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlVG9kbyk7XHJcbn0pO1xyXG5lZGl0VG9kb0J0bnMuZm9yRWFjaChidG4gPT4ge1xyXG5cdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNldEVkaXRJbnB1dHMpO1xyXG59KTtcclxuY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcclxuXHRjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUNvbXBsZXRlVG9kbyk7XHJcbn0pO1xyXG5cclxuZWRpdFRvZG9JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGNsZWFyRWRpdFRpdGxlRXJyb3IpXHJcblxyXG5zYXZlQ2hhbmdlc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRpZiAodG9kb0lkKSB7XHJcblx0XHRjb25zdCB0aXRsZSA9IGVkaXRUb2RvSW5wdXQudmFsdWU7XHJcblx0XHRjb25zdCBkZXNjcmlwdGlvbiA9IGVkaXRUb2RvRGVzY3JpcHRpb24udmFsdWU7XHJcblx0XHR1cGRhdGVUb2RvKHRvZG9JZCwgdGl0bGUsIGRlc2NyaXB0aW9uKTtcclxuXHR9XHJcbn0pO1xyXG4iXX0=
