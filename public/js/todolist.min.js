"use strict";var removeTodoBtns=document.querySelectorAll(".remove-todo-btn"),editTodoBtns=document.querySelectorAll(".edit-todo-btn"),saveChangesBtn=document.querySelector(".save-changes"),editTodoInput=document.querySelector(".edit-todo-input"),editTodoDescription=document.querySelector(".edit-todo-description"),checkboxes=document.querySelectorAll(".todo-checkbox"),editTodoModal=document.getElementById("editTodoModal"),addTodoModal=document.getElementById("addTodoModal"),addTodoTitle=document.querySelector(".add-todo-title"),addTodoDescription=document.querySelector(".add-todo-description"),addTodoBtn=document.querySelector(".add-todo-btn"),searchInput=document.querySelector(".search-input"),todoItems=document.querySelectorAll(".todo"),myTasksHeader=document.querySelector(".my-tasks-header"),searchBox=document.querySelector(".search-box"),todoId=null,setTaskCounter=function(){var e=document.querySelector(".task-counter"),o=todoItems.length;2<=o?(e.innerHTML="Masz ".concat(todoItems.length," zadania do zrobienia"),myTasksHeader.classList.remove("d-none"),searchBox.classList.remove("d-none")):1===o?(e.innerHTML="Masz jedno zadanie do zrobienia",myTasksHeader.classList.remove("d-none"),searchBox.classList.remove("d-none")):e.innerHTML="Nie masz żadnych zadań do zrobienia"},searchTodoHandler=(setTaskCounter(),function(){var o=searchInput.value.toLowerCase();todoItems.forEach(function(e){e.querySelector(".todo-title").textContent.toLocaleLowerCase().includes(o)?(e.classList.add("d-flex"),e.classList.remove("d-none")):(e.classList.add("d-none"),e.classList.remove("d-flex"))})}),removeTodo=function(e){e.stopPropagation();var e=e.currentTarget.getAttribute("data-todo-id"),o=document.getElementById(e),t=todoItems.length;fetch("../app/includes/remove_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).then(o.remove()).catch(function(e){console.error("Wystąpił błąd:",e)}),setTaskCounter(),t<=1&&(myTasksHeader.classList.add("d-none"),searchBox.classList.add("d-none"))},setEditTitleError=function(){editTodoInput.classList.add("error"),editTodoInput.nextElementSibling.classList.remove("d-none")},clearEditTitleError=function(){editTodoInput.classList.remove("error"),editTodoInput.nextElementSibling.classList.add("d-none")},updateTodo=function(e){var o,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;""===t?setEditTitleError():((o=new URLSearchParams).append("id",e),o.append("title",t),o.append("description",d),fetch("../app/includes/edit_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o}).then(function(){return location.reload()}).catch(function(e){console.error("Wystąpił błąd:",e)}))},setAddTodoTitleError=function(){addTodoTitle.classList.add("error"),addTodoTitle.nextElementSibling.classList.remove("d-none")},clearAddTodoError=function(){addTodoTitle.classList.remove("error"),addTodoTitle.nextElementSibling.classList.add("d-none")},toggleCompleteTodo=function(e){var e=e.currentTarget.getAttribute("data-todo-id"),o=document.getElementById(e);o.classList.contains("todo-done")?o.classList.remove("todo-done"):o.classList.add("todo-done"),fetch("../app/includes/complete_todo.inc.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).catch(function(e){console.error("Wystąpił błąd:",e)})},setEditInputs=function(e){todoId=e.currentTarget.getAttribute("data-todo-id");var e=document.querySelector('.todo-title[data-todo-id="'.concat(todoId,'"]')),o=document.querySelector('.todo-description[data-todo-id="'.concat(todoId,'"]'));editTodoInput.value=e.textContent,editTodoDescription.value=o.textContent};editTodoModal.addEventListener("hidden.bs.modal",function(){editTodoInput.value="",editTodoDescription.value="",todoId=null,clearEditTitleError()}),addTodoModal.addEventListener("hidden.bs.modal",function(){addTodoTitle.value="",addTodoDescription.value="",clearAddTodoError()}),addTodoBtn.addEventListener("click",function(e){""===addTodoTitle.value&&(e.preventDefault(),setAddTodoTitleError())}),searchInput.addEventListener("input",searchTodoHandler),addTodoTitle.addEventListener("input",clearAddTodoError),removeTodoBtns.forEach(function(e){e.addEventListener("click",removeTodo)}),editTodoBtns.forEach(function(e){e.addEventListener("click",setEditInputs)}),checkboxes.forEach(function(e){e.addEventListener("click",toggleCompleteTodo)}),editTodoInput.addEventListener("input",clearEditTitleError),saveChangesBtn.addEventListener("click",function(){var e,o;todoId&&(e=editTodoInput.value,o=editTodoDescription.value,updateTodo(todoId,e,o))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG9saXN0LmpzIl0sIm5hbWVzIjpbInJlbW92ZVRvZG9CdG5zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWRpdFRvZG9CdG5zIiwic2F2ZUNoYW5nZXNCdG4iLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFRvZG9JbnB1dCIsImVkaXRUb2RvRGVzY3JpcHRpb24iLCJjaGVja2JveGVzIiwiZWRpdFRvZG9Nb2RhbCIsImdldEVsZW1lbnRCeUlkIiwiYWRkVG9kb01vZGFsIiwiYWRkVG9kb1RpdGxlIiwiYWRkVG9kb0Rlc2NyaXB0aW9uIiwiYWRkVG9kb0J0biIsInNlYXJjaElucHV0IiwidG9kb0l0ZW1zIiwic2VhcmNoQm94Iiwic2V0VGFza0NvdW50ZXIiLCJ0YXNrQ291bnRlciIsInRhc2tzQW1vdW50IiwibGVuZ3RoIiwiY2xhc3NMaXN0IiwibXlUYXNrc0hlYWRlciIsImNvbmNhdCIsInJlbW92ZSIsImlubmVySFRNTCIsInNlYXJjaFRvZG9IYW5kbGVyIiwiZm9yRWFjaCIsInRvZG8iLCJhZGQiLCJ2YWx1ZSIsInRvTG93ZXJDYXNlIiwidGV4dENvbnRlbnQiLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsImluY2x1ZGVzIiwic2VhcmNoVmFsdWUiLCJzdG9wUHJvcGFnYXRpb24iLCJjdXJyZW50VGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwiaGVhZGVycyIsImUiLCJpZCIsImJvZHkiLCJ0aGVuIiwiZmV0Y2giLCJDb250ZW50LVR5cGUiLCJzZXRFZGl0VGl0bGVFcnJvciIsImNvbnNvbGUiLCJlcnJvclBhcmFncmFwaCIsIm5leHRFbGVtZW50U2libGluZyIsImRlc2NyaXB0aW9uIiwiYXJndW1lbnRzIiwicGFyYW1zIiwidG9kb0lkIiwiYXBwZW5kIiwidXBkYXRlVG9kbyIsInRpdGxlIiwidW5kZWZpbmVkIiwiVVJMU2VhcmNoUGFyYW1zIiwiZXJyb3IiLCJzZXRBZGRUb2RvVGl0bGVFcnJvciIsImNsZWFyQWRkVG9kb0Vycm9yIiwidG9nZ2xlQ29tcGxldGVUb2RvIiwidG9kb0RpdiIsImRlc2NyaXB0aW9uUGFyYWdyYXBoIiwidGl0bGVQYXJhZ3JhcGgiLCJjbGVhckVkaXRUaXRsZUVycm9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEVkaXRJbnB1dHMiLCJwcmV2ZW50RGVmYXVsdCIsImJ0biIsInJlbW92ZVRvZG8iLCJjaGVja2JveCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsZUFBaUJDLFNBQVNDLGlCQUFpQixrQkFBa0IsRUFDN0RDLGFBQWVGLFNBQVNDLGlCQUFpQixnQkFBZ0IsRUFEekRGLGVBQWlCQyxTQUFTQyxjQUFnQixlQUFDLEVBQzNDQyxjQUFlRixTQUFTQyxjQUFpQixrQkFBaUIsRUFDMURFLG9CQUFpQkgsU0FBU0ksY0FBYyx3QkFBZ0IsRUFDeERDLFdBQWFMLFNBQVdDLGlCQUFlLGdCQUFrQixFQUN6REssY0FBQUEsU0FBc0JOLGVBQVNJLGVBQWMsRUFDN0NHLGFBQWFQLFNBQVNDLGVBQWlCLGNBQWdCLEVBQ3ZETyxhQUFnQlIsU0FBU1MsY0FBZSxpQkFBZ0IsRUFDeERDLG1CQUF1QlYsU0FBQ1MsY0FBZSx1QkFBZSxFQUN0REUsV0FBZVgsU0FBU0ksY0FBYyxlQUFBLEVBQ3RDUSxZQUFBQSxTQUFxQlosY0FBU0ksZUFBYyxFQUM1Q1MsVUFBYWIsU0FBU0ksaUJBQWMsT0FBQSxFQUNwQ1UsY0FBY2QsU0FBU0ksY0FBYyxrQkFBZ0IsRUFDckRXLFVBQVlmLFNBQVNDLGNBQWdCLGFBQVMsRUFFOUNlLE9BQVMsS0FJVEMsZUFBaUIsV0FDdEIsSUFBTUMsRUFBY2xCLFNBQVNJLGNBQWMsZUFBZ0IsRUFJdkRlLEVBQWVKLFVBQUdLLE9BRVBDLEdBQWRDLEdBREFKLEVBRVVHLFVBQVMsUUFBQUUsT0FBUVIsVUFBU0ssT0FBQSx1QkFBQSxFQUNyQ0UsY0FBV0gsVUFBV0ssT0FBUSxRQUFBLEVBRDdCUixVQUVBRSxVQUFZTyxPQUFTLFFBQUEsR0FDR0QsSUFBeEJGLEdBREFKLEVBRVVHLFVBQVMsa0NBQ3BCQyxjQUFPRCxVQUFBRyxPQUFBLFFBQUEsRUFETlIsVUFFQUUsVUFBWU8sT0FBUyxRQUFBLEdBRXRCUCxFQUFBTyxVQUFBLHFDQUlELEVBTUVDLG1CQVJGVCxlQUtXVSxFQUdhLFdBTHZCLElBTUVDLEVBQWVDLFlBQVlDLE1BQUNDLFlBQUEsRUFKOUJoQixVQU1RWSxRQUFBLFNBQUFDLEdBQ1FBLEVBQUt4QixjQUFTLGFBQUEsRUFBQTRCLFlBQUFDLGtCQUFBLEVBRTdCQyxTQUFBQyxDQUFBLEdBQ0FQLEVBQUNQLFVBQUFRLElBQUEsUUFBQSxFQUNGRCxFQUFBUCxVQUFBRyxPQUFBLFFBQUEsSUFHQ0ksRUFBQ1EsVUFBQUEsSUFBaUIsUUFBQSxFQUNuQlIsRUFBUVAsVUFBS2dCLE9BQUFBLFFBQWNDLEVBTDNCLENBT0EsQ0FORCxHQVVFQyxXQUFTLFNBQUFDLEdBUFZBLEVBQUVKLGdCQVFBLEVBUEYsSUFRRUssRUFBQUQsRUFBQUgsY0FBQUMsYUFBQSxjQUFBLEVBQ0RJLEVBQVcxQyxTQUFHeUMsZUFBQUEsQ0FBQUEsRUFFYkUsRUFBYW5CLFVBQVNKLE9BUHhCd0IsTUFVRyxzQ0FBQSxDQUNIM0IsT0FBQUEsT0FFQXNCLFFBQUlwQixDQVZGMEIsZUFXYXhCLG1DQVZkLEVBWURxQixLQUFBLE1BQUFELENBQ0EsQ0FBQSxFQUVERSxLQUFNRyxFQUFBQSxPQUFpQixDQUFHLEVBQUEsTUFDekJ6QyxTQUFBQSxHQUNBMEMsUUFBTUMsTUFBQUEsaUJBQWlCM0MsQ0FBYzRDLENBQ3JDRCxDQUFBQSxFQUNBL0IsZUFBQSxFQUdBWixHQUFjZ0IsSUFDZEMsY0FBTTBCLFVBQWlCM0MsSUFBQUEsUUFBYzRDLEVBQ3JDRCxVQUFBQSxVQUFlM0IsSUFBUyxRQUFLLEVBRzlCLEVBQTBDNkIsa0JBQVdDLFdBWHBEOUMsY0FZU2dCLFVBQVNRLElBQUEsT0FBQSxFQUNFeEIsY0FBQTRDLG1CQUNuQjVCLFVBQUFHLE9BQUEsUUFBQSxDQVhGLEVBY0U0QixvQkFBb0JDLFdBWHJCaEQsY0FZUWlELFVBQWM5QixPQUFPLE9BQUMsRUFDZm5CLGNBQWU2QyxtQkFFdkI3QixVQUFBUSxJQUFBLFFBQUEsQ0FaUixFQUVNMEIsV0FhRixTQUFBRixHQUFnQixJQUlhRCxFQUpiSSxFQUFBLEVBQUFMLFVBQUEvQixRQUFBcUMsS0FBQUEsSUFBQU4sVUFBQSxHQUFBQSxVQUFBLEdBQUEsS0FBQUQsRUFBQSxFQUFBQyxVQUFBL0IsUUFBQXFDLEtBQUFBLElBQUFOLFVBQUEsR0FBQUEsVUFBQSxHQUFBLEtBQ2hCLEtBYkNLLEVBQ0hWLGtCQWFPTSxJQUV3QkEsRUFDdkIsSUFBQU0saUJBQ05YLE9BQVFZLEtBQU1OLENBQUEsRUFaaEJELEVBYUdFLE9BQUEsUUFBQUUsQ0FBQSxFQUNKSixFQUFBRSxPQUFBLGNBQUFKLENBQUEsRUFHRE4sTUFBTWdCLG9DQUFBQSxDQUNMakQsT0FBQUEsT0FDQTRCLFFBQU1TLENBQ05BLGVBQWUzQixtQ0FDZixFQUVEcUIsS0FBTW1CLENBQ0xsRCxDQUFBQSxFQUNBZ0MsS0FBTUssV0FBQUEsT0FBQUEsU0FBaUJyQyxPQUFBQSxDQUFBQSxDQUFBQSxFQUFBQSxNQUN2QnFDLFNBQUFBLEdBQ0FELFFBQUFZLE1BQUEsaUJBQUFBLENBQUEsQ0FFRCxDQUFNRyxFQWROLEVBb0JFQyxxQkFBeUIsV0FqQjFCcEQsYUFrQk9VLFVBQUFRLElBQUEsT0FBQSxFQUNZQSxhQUFlb0IsbUJBQ2xDNUIsVUFBQUcsT0FBQSxRQUFBLENBakJELEVBcUJFZSxrQkFBUyxXQWxCVjVCLGFBbUJFVSxVQUFnQkcsT0FBQSxPQUFBLEVBQ2hCYixhQUFBc0MsbUJBQ1U1QixVQUFHb0IsSUFBQUEsUUFBQUEsQ0FsQmhCLEVBcUJHcUIsbUJBQUEsU0FBQXRCLEdBQ0YsSUFBQUMsRUFBQUQsRUFBQUgsY0FBQUMsYUFBQSxjQUFBLEVBR0FlLEVBQVdoQixTQUFhNUIsZUFBY2dDLENBQUEsRUFHdENzQixFQUFNQyxVQUFBQSxTQUF1QmhFLFdBQVNJLEVBRXRDQyxFQUFBQSxVQUFjeUIsT0FBUW1DLFdBQWMsRUFFcENGLEVBQUExQyxVQUFBUSxJQUFBLFdBQUEsRUFuQkFlLE1BQU0sd0NBQXlDLENBd0JoRHBDLE9BQUFBLE9BQ0NILFFBQUFBLENBQ0FDLGVBQUFBLG1DQUNBK0MsRUFDQWEsS0FBQUEsTUFBQUEsQ0FDQSxDQUFDLEVBQUEsTUFBQSxTQUFBUCxHQUVGakQsUUFBQUEsTUFBYXlELGlCQUFpQlIsQ0FBQSxDQXZCN0IsQ0F3QkFoRCxDQXZCRCxFQTBCRXlELGNBQUEsU0FBQTVCLEdBRUYzQixPQUFVMkIsRUFBQzJCLGNBQUFBLGFBQTBCLGNBQUssRUF2QnpDLElBeUJHRSxFQUFnQnJFLFNBQUFJLGNBQUEsNkJBQUFtQixPQUFBOEIsT0FBQSxJQUFBLENBQUEsRUFDbEJPLEVBQXNCNUQsU0FBQUksY0FBQSxtQ0FBQW1CLE9BQUE4QixPQUFBLElBQUEsQ0FBQSxFQXZCdkJoRCxjQXlCQ3lCLE1BQUFtQyxFQUFBakMsWUF4QkQxQixvQkF5QkF3QixNQUFBa0MsRUFBQWhDLFdBQ0QsRUFTQXhCLGNBQUUyRCxpQkFBQSxrQkFBQSxXQUNGakUsY0FBYXlCLE1BQVEsR0E1QnBCckIsb0JBNkJJNkQsTUFBaUIsR0FDckJkLE9BQUMsS0FDRjlDLG9CQUFtQixDQTVCbkIsQ0FBQyxFQWdDREYsYUFBYThELGlCQUFpQixrQkFBVUQsV0FFeEMvRCxhQUFjMkIsTUFBQ3FDLEdBOUJkdkQsbUJBK0JZa0IsTUFBQSxHQTlCWitCLGtCQStCZXhELENBOUJoQixDQUFDLEVBRURRLFdBK0JDc0QsaUJBQUEsUUFBQSxTQUFBM0IsR0FDQyxLQUFBN0IsYUFBQW1CLFFBOUJBVSxFQUFFNkIsZUFBZSxFQUNqQlQscUJBQXFCLEVBSXZCLENBQUMsRUFHRDlDLFlBQVlxRCxpQkFBaUIsUUFBU3pDLGlCQUFpQixFQUV2RGYsYUFBYXdELGlCQUFpQixRQUFTTixpQkFBaUIsRUFFeEQ5RCxlQUFlNEIsUUFBUSxTQUFBMkMsR0FDdEJBLEVBQUlILGlCQUFpQixRQUFTSSxVQUFVLENBQ3pDLENBQUMsRUFDRHJFLGFBQWF5QixRQUFRLFNBQUEyQyxHQUNwQkEsRUFBSUgsaUJBQWlCLFFBQVNDLGFBQWEsQ0FDNUMsQ0FBQyxFQUNEN0QsV0FBV29CLFFBQVEsU0FBQTZDLEdBQ2xCQSxFQUFTTCxpQkFBaUIsUUFBU0wsa0JBQWtCLENBQ3RELENBQUMsRUFFRHpELGNBQWM4RCxpQkFBaUIsUUFBU0QsbUJBQW1CLEVBRTNEL0QsZUFBZWdFLGlCQUFpQixRQUFTLFdBQ3hDLElBQ09YLEVBQ0FOLEVBRkhHLFNBQ0dHLEVBQVFuRCxjQUFjeUIsTUFDdEJvQixFQUFjNUMsb0JBQW9Cd0IsTUFDeEN5QixXQUFXRixPQUFRRyxFQUFPTixDQUFXLEVBRXZDLENBQUMiLCJmaWxlIjoidG9kb2xpc3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVtb3ZlVG9kb0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVtb3ZlLXRvZG8tYnRuJyk7XHJcbmNvbnN0IGVkaXRUb2RvQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0LXRvZG8tYnRuJyk7XHJcbmNvbnN0IHNhdmVDaGFuZ2VzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhdmUtY2hhbmdlcycpO1xyXG5jb25zdCBlZGl0VG9kb0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdG9kby1pbnB1dCcpO1xyXG5jb25zdCBlZGl0VG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdG9kby1kZXNjcmlwdGlvbicpO1xyXG5jb25zdCBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8tY2hlY2tib3gnKTtcclxuY29uc3QgZWRpdFRvZG9Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0VG9kb01vZGFsJyk7XHJcbmNvbnN0IGFkZFRvZG9Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUb2RvTW9kYWwnKTtcclxuY29uc3QgYWRkVG9kb1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLXRpdGxlJyk7XHJcbmNvbnN0IGFkZFRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kby1kZXNjcmlwdGlvbicpO1xyXG5jb25zdCBhZGRUb2RvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLWJ0bicpO1xyXG5jb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaW5wdXQnKTtcclxuY29uc3QgdG9kb0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8nKTtcclxuY29uc3QgbXlUYXNrc0hlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5teS10YXNrcy1oZWFkZXInKTtcclxuY29uc3Qgc2VhcmNoQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1ib3gnKTtcclxuXHJcbmxldCB0b2RvSWQgPSBudWxsO1xyXG5cclxuY29uc3Qgc2V0VGFza0NvdW50ZXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgdGFza0NvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1jb3VudGVyJyk7XHJcblxyXG5cdGNvbnN0IHRhc2tzQW1vdW50ID0gdG9kb0l0ZW1zLmxlbmd0aDtcclxuXHJcblx0aWYgKHRhc2tzQW1vdW50ID49IDIpIHtcclxuXHRcdHRhc2tDb3VudGVyLmlubmVySFRNTCA9IGBNYXN6ICR7dG9kb0l0ZW1zLmxlbmd0aH0gemFkYW5pYSBkbyB6cm9iaWVuaWFgO1xyXG5cdFx0bXlUYXNrc0hlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKVxyXG5cdFx0c2VhcmNoQm94LmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXHJcblx0fSBlbHNlIGlmICh0YXNrc0Ftb3VudCA9PT0gMSkge1xyXG5cdFx0dGFza0NvdW50ZXIuaW5uZXJIVE1MID0gYE1hc3ogamVkbm8gemFkYW5pZSBkbyB6cm9iaWVuaWFgO1xyXG5cdFx0bXlUYXNrc0hlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKVxyXG5cdFx0c2VhcmNoQm94LmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpXHJcblx0fSBlbHNlIHtcclxuXHRcdHRhc2tDb3VudGVyLmlubmVySFRNTCA9IGBOaWUgbWFzeiDFvGFkbnljaCB6YWRhxYQgZG8genJvYmllbmlhYDtcclxuXHR9XHJcbn07XHJcblxyXG5zZXRUYXNrQ291bnRlcigpO1xyXG5cclxuY29uc3Qgc2VhcmNoVG9kb0hhbmRsZXIgPSAoKSA9PiB7XHJcblx0Y29uc3Qgc2VhcmNoVmFsdWUgPSBzZWFyY2hJbnB1dC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHR0b2RvSXRlbXMuZm9yRWFjaCh0b2RvID0+IHtcclxuXHRcdGNvbnN0IHRvZG9UaXRsZSA9IHRvZG8ucXVlcnlTZWxlY3RvcignLnRvZG8tdGl0bGUnKS50ZXh0Q29udGVudC50b0xvY2FsZUxvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdGlmICh0b2RvVGl0bGUuaW5jbHVkZXMoc2VhcmNoVmFsdWUpKSB7XHJcblx0XHRcdHRvZG8uY2xhc3NMaXN0LmFkZCgnZC1mbGV4Jyk7XHJcblx0XHRcdHRvZG8uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0b2RvLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG5cdFx0XHR0b2RvLmNsYXNzTGlzdC5yZW1vdmUoJ2QtZmxleCcpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgcmVtb3ZlVG9kbyA9IGUgPT4ge1xyXG5cdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0Y29uc3QgaWQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taWQnKTtcclxuXHRjb25zdCB0b2RvRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cdGNvbnN0IHRhc2tzQW1vdW50ID0gdG9kb0l0ZW1zLmxlbmd0aDtcclxuXHJcblx0ZmV0Y2goJy4uL2FwcC9pbmNsdWRlcy9yZW1vdmVfdG9kby5pbmMucGhwJywge1xyXG5cdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuXHRcdH0sXHJcblx0XHRib2R5OiAnaWQ9JyArIGlkLFxyXG5cdH0pXHJcblx0XHQudGhlbih0b2RvRGl2LnJlbW92ZSgpKVxyXG5cdFx0LmNhdGNoKGVycm9yID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignV3lzdMSFcGnFgiBixYLEhWQ6JywgZXJyb3IpO1xyXG5cdFx0fSk7XHJcblx0c2V0VGFza0NvdW50ZXIoKTtcclxuXHJcblx0aWYgKHRhc2tzQW1vdW50IDw9IDEpIHtcclxuXHRcdG15VGFza3NIZWFkZXIuY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcclxuXHRcdHNlYXJjaEJveC5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKVxyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHNldEVkaXRUaXRsZUVycm9yID0gKCkgPT4ge1xyXG5cdGVkaXRUb2RvSW5wdXQuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuXHRjb25zdCBlcnJvclBhcmFncmFwaCA9IGVkaXRUb2RvSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cdGVycm9yUGFyYWdyYXBoLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG59O1xyXG5cclxuY29uc3QgY2xlYXJFZGl0VGl0bGVFcnJvciA9ICgpID0+IHtcclxuXHRlZGl0VG9kb0lucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcblx0Y29uc3QgZXJyb3JQYXJhZ3JhcGggPSBlZGl0VG9kb0lucHV0Lm5leHRFbGVtZW50U2libGluZztcclxuXHRlcnJvclBhcmFncmFwaC5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxufTtcclxuXHJcbmNvbnN0IHVwZGF0ZVRvZG8gPSAodG9kb0lkLCB0aXRsZSA9IG51bGwsIGRlc2NyaXB0aW9uID0gbnVsbCkgPT4ge1xyXG5cdGlmICh0aXRsZSA9PT0gJycpIHtcclxuXHRcdHNldEVkaXRUaXRsZUVycm9yKCk7XHJcblx0XHRyZXR1cm47XHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcclxuXHRcdHBhcmFtcy5hcHBlbmQoJ2lkJywgdG9kb0lkKTtcclxuXHRcdHBhcmFtcy5hcHBlbmQoJ3RpdGxlJywgdGl0bGUpO1xyXG5cdFx0cGFyYW1zLmFwcGVuZCgnZGVzY3JpcHRpb24nLCBkZXNjcmlwdGlvbik7XHJcblxyXG5cdFx0ZmV0Y2goJy4uL2FwcC9pbmNsdWRlcy9lZGl0X3RvZG8uaW5jLnBocCcsIHtcclxuXHRcdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXHJcblx0XHRcdH0sXHJcblx0XHRcdGJvZHk6IHBhcmFtcyxcclxuXHRcdH0pXHJcblx0XHRcdC50aGVuKCgpID0+IGxvY2F0aW9uLnJlbG9hZCgpKVxyXG5cdFx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1d5c3TEhXBpxYIgYsWCxIVkOicsIGVycm9yKTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3Qgc2V0QWRkVG9kb1RpdGxlRXJyb3IgPSAoKSA9PiB7XHJcblx0YWRkVG9kb1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcblx0Y29uc3QgZXJyb3JQYXJhZ3JhcGggPSBhZGRUb2RvVGl0bGUubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cdGVycm9yUGFyYWdyYXBoLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG59O1xyXG5cclxuY29uc3QgY2xlYXJBZGRUb2RvRXJyb3IgPSAoKSA9PiB7XHJcblx0YWRkVG9kb1RpdGxlLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcblx0Y29uc3QgZXJyb3JQYXJhZ3JhcGggPSBhZGRUb2RvVGl0bGUubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cdGVycm9yUGFyYWdyYXBoLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlQ29tcGxldGVUb2RvID0gZSA9PiB7XHJcblx0Y29uc3QgaWQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taWQnKTtcclxuXHJcblx0Y29uc3QgdG9kb0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuXHJcblx0aWYgKHRvZG9EaXYuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b2RvLWRvbmUnKSkge1xyXG5cdFx0dG9kb0Rpdi5jbGFzc0xpc3QucmVtb3ZlKCd0b2RvLWRvbmUnKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0dG9kb0Rpdi5jbGFzc0xpc3QuYWRkKCd0b2RvLWRvbmUnKTtcclxuXHR9XHJcblxyXG5cdGZldGNoKCcuLi9hcHAvaW5jbHVkZXMvY29tcGxldGVfdG9kby5pbmMucGhwJywge1xyXG5cdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuXHRcdH0sXHJcblx0XHRib2R5OiAnaWQ9JyArIGlkLFxyXG5cdH0pLmNhdGNoKGVycm9yID0+IHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoJ1d5c3TEhXBpxYIgYsWCxIVkOicsIGVycm9yKTtcclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IHNldEVkaXRJbnB1dHMgPSBlID0+IHtcclxuXHR0b2RvSWQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taWQnKTtcclxuXHJcblx0Y29uc3QgdGl0bGVQYXJhZ3JhcGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAudG9kby10aXRsZVtkYXRhLXRvZG8taWQ9XCIke3RvZG9JZH1cIl1gKTtcclxuXHRjb25zdCBkZXNjcmlwdGlvblBhcmFncmFwaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50b2RvLWRlc2NyaXB0aW9uW2RhdGEtdG9kby1pZD1cIiR7dG9kb0lkfVwiXWApO1xyXG5cclxuXHRlZGl0VG9kb0lucHV0LnZhbHVlID0gdGl0bGVQYXJhZ3JhcGgudGV4dENvbnRlbnQ7XHJcblx0ZWRpdFRvZG9EZXNjcmlwdGlvbi52YWx1ZSA9IGRlc2NyaXB0aW9uUGFyYWdyYXBoLnRleHRDb250ZW50O1xyXG59O1xyXG5cclxuXHJcbi8vIGFkZEV2ZW50TGlzdGVuZXIneVxyXG5cclxuZWRpdFRvZG9Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcblx0ZWRpdFRvZG9JbnB1dC52YWx1ZSA9ICcnO1xyXG5cdGVkaXRUb2RvRGVzY3JpcHRpb24udmFsdWUgPSAnJztcclxuXHR0b2RvSWQgPSBudWxsO1xyXG5cdGNsZWFyRWRpdFRpdGxlRXJyb3IoKTtcclxufSk7XHJcblxyXG5hZGRUb2RvTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xyXG5cdGFkZFRvZG9UaXRsZS52YWx1ZSA9ICcnO1xyXG5cdGFkZFRvZG9EZXNjcmlwdGlvbi52YWx1ZSA9ICcnO1xyXG5cdGNsZWFyQWRkVG9kb0Vycm9yKCk7XHJcbn0pO1xyXG5cclxuYWRkVG9kb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG5cdGlmIChhZGRUb2RvVGl0bGUudmFsdWUgPT09ICcnKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRzZXRBZGRUb2RvVGl0bGVFcnJvcigpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG59KTtcclxuXHJcblxyXG5zZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHNlYXJjaFRvZG9IYW5kbGVyKTtcclxuXHJcbmFkZFRvZG9UaXRsZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGNsZWFyQWRkVG9kb0Vycm9yKTtcclxuXHJcbnJlbW92ZVRvZG9CdG5zLmZvckVhY2goYnRuID0+IHtcclxuXHRidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVUb2RvKTtcclxufSk7XHJcbmVkaXRUb2RvQnRucy5mb3JFYWNoKGJ0biA9PiB7XHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2V0RWRpdElucHV0cyk7XHJcbn0pO1xyXG5jaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG5cdGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQ29tcGxldGVUb2RvKTtcclxufSk7XHJcblxyXG5lZGl0VG9kb0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2xlYXJFZGl0VGl0bGVFcnJvcik7XHJcblxyXG5zYXZlQ2hhbmdlc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRpZiAodG9kb0lkKSB7XHJcblx0XHRjb25zdCB0aXRsZSA9IGVkaXRUb2RvSW5wdXQudmFsdWU7XHJcblx0XHRjb25zdCBkZXNjcmlwdGlvbiA9IGVkaXRUb2RvRGVzY3JpcHRpb24udmFsdWU7XHJcblx0XHR1cGRhdGVUb2RvKHRvZG9JZCwgdGl0bGUsIGRlc2NyaXB0aW9uKTtcclxuXHR9XHJcbn0pO1xyXG4iXX0=
